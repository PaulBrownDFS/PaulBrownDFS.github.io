!function(t,e){var i=0,s=Array.prototype.slice,o=t.cleanData;t.cleanData=function(e){for(var i,s=0;null!=(i=e[s]);s++)try{t(i).triggerHandler("remove")}catch(t){}o(e)},t.widget=function(i,s,o){var n,a,r,h,c={},l=i.split(".")[0];i=i.split(".")[1],n=l+"-"+i,o||(o=s,s=t.Widget),t.expr[":"][n.toLowerCase()]=function(e){return!!t.data(e,n)},t[l]=t[l]||{},a=t[l][i],r=t[l][i]=function(t,i){return this._createWidget?(arguments.length&&this._createWidget(t,i),e):new r(t,i)},t.extend(r,a,{version:o.version,_proto:t.extend({},o),_childConstructors:[]}),h=new s,h.options=t.widget.extend({},h.options),t.each(o,function(i,o){return t.isFunction(o)?(c[i]=function(){var t=function(){return s.prototype[i].apply(this,arguments)},e=function(t){return s.prototype[i].apply(this,t)};return function(){var i,s=this._super,n=this._superApply;return this._super=t,this._superApply=e,i=o.apply(this,arguments),this._super=s,this._superApply=n,i}}(),e):(c[i]=o,e)}),r.prototype=t.widget.extend(h,{widgetEventPrefix:a?h.widgetEventPrefix||i:i},c,{constructor:r,namespace:l,widgetName:i,widgetFullName:n}),a?(t.each(a._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,r,i._proto)}),delete a._childConstructors):s._childConstructors.push(r),t.widget.bridge(i,r)},t.widget.extend=function(i){for(var o,n,a=s.call(arguments,1),r=0,h=a.length;h>r;r++)for(o in a[r])n=a[r][o],a[r].hasOwnProperty(o)&&n!==e&&(i[o]=t.isPlainObject(n)?t.isPlainObject(i[o])?t.widget.extend({},i[o],n):t.widget.extend({},n):n);return i},t.widget.bridge=function(i,o){var n=o.prototype.widgetFullName||i;t.fn[i]=function(a){var r="string"==typeof a,h=s.call(arguments,1),c=this;return a=!r&&h.length?t.widget.extend.apply(null,[a].concat(h)):a,r?this.each(function(){var s,o=t.data(this,n);return o?t.isFunction(o[a])&&"_"!==a.charAt(0)?(s=o[a].apply(o,h),s!==o&&s!==e?(c=s&&s.jquery?c.pushStack(s.get()):s,!1):e):t.error("no such method '"+a+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+a+"'")}):this.each(function(){var e=t.data(this,n);e?e.option(a||{})._init():t.data(this,n,new o(a,this))}),c}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),s!==this&&(t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,s){var o,n,a,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},o=i.split("."),i=o.shift(),o.length){for(n=r[i]=t.widget.extend({},this.options[i]),a=0;o.length-1>a;a++)n[o[a]]=n[o[a]]||{},n=n[o[a]];if(i=o.pop(),1===arguments.length)return n[i]===e?null:n[i];n[i]=s}else{if(1===arguments.length)return this.options[i]===e?null:this.options[i];r[i]=s}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(i,s,o){var n,a=this;"boolean"!=typeof i&&(o=s,s=i,i=!1),o?(s=n=t(s),this.bindings=this.bindings.add(s)):(o=s,s=this.element,n=this.widget()),t.each(o,function(o,r){function h(){return i||a.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof r?a[r]:r).apply(a,arguments):e}"string"!=typeof r&&(h.guid=r.guid=r.guid||h.guid||t.guid++);var c=o.match(/^(\w+)\s*(.*)$/),l=c[1]+a.eventNamespace,u=c[2];u?n.delegate(u,l,h):s.bind(l,h)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var o,n,a=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],n=i.originalEvent)for(o in n)o in i||(i[o]=n[o]);return this.element.trigger(i,s),!(t.isFunction(a)&&a.apply(this.element[0],[i].concat(s))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,o,n){"string"==typeof o&&(o={effect:o});var a,r=o?o===!0||"number"==typeof o?i:o.effect||i:e;o=o||{},"number"==typeof o&&(o={duration:o}),a=!t.isEmptyObject(o),o.complete=n,o.delay&&s.delay(o.delay),a&&t.effects&&t.effects.effect[r]?s[e](o):r!==e&&s[r]?s[r](o.duration,o.easing,n):s.queue(function(i){t(this)[e](),n&&n.call(s[0]),i()})}})}(jQuery);var amp=amp||{};!function(){function t(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i+"="+t[i]);return e.join("&")}function e(t,e){for(var i=t.split("&"),s=[],o=0;o<i.length;o++){var n=i[o].split("="),a={};e?e(n,a):a[n[0]]=n[1],s.push(a)}return s}function i(t){return"[object Array]"===Object.prototype.toString.call(t)}amp.di={},amp.stats={},function(){for(var t=0,e=["webkit","moz"],i=0;i<e.length&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,i){var s=(new Date).getTime(),o=Math.max(0,16-(s-t)),n=window.setTimeout(function(){e(s+o)},o);return t=s+o,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var s=s||{};s.stringify=s.stringify||function(t){var e=typeof t;if("object"!=e||null===t)return"string"==e&&(t='"'+t+'"'),String(t);var i,o,n=[],a=t&&t.constructor==Array;for(i in t)t.hasOwnProperty(i)&&(o=t[i],e=typeof o,"string"==e?o='"'+o+'"':"object"==e&&null!==o&&(o=s.stringify(o)),n.push((a?"":'"'+i+'":')+String(o)));return(a?"[":"{")+String(n)+(a?"]":"}")},s.parse=s.parse||function(t){if("string"!=typeof t||!t)return null;var e=/^[\],:{}\s]*$/;return e.test(t.replace(/^\s+|\s+$/g,"").replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?new Function("return "+t)():void 0},function(){var t,e,i,s;!function(){var o={},n={};t=function(t,e,i){o[t]={deps:e,callback:i}},s=i=e=function(t){if(s._eak_seen=o,n[t])return n[t];if(n[t]={},!o[t])throw new Error("Could not find module "+t);for(var i,a=o[t],r=a.deps,h=a.callback,c=[],l=0,u=r.length;l<u;l++)"exports"===r[l]?c.push(i={}):c.push(e(function(e){if("."!==e.charAt(0))return e;for(var i=e.split("/"),s=t.split("/").slice(0,-1),o=0,n=i.length;o<n;o++){var a=i[o];if(".."===a)s.pop();else{if("."===a)continue;s.push(a)}}return s.join("/")}(r[l])));var p=h.apply(this,c);return n[t]=i||p}}(),t("promise/all",["./utils","exports"],function(t,e){"use strict";function i(t){var e=this;if(!s(t))throw new TypeError("You must pass an array to all.");return new e(function(e,i){function s(t,i){a[t]=i,0==--r&&e(a)}var n,a=[],r=t.length;0===r&&e([]);for(var h=0;h<t.length;h++)n=t[h],n&&o(n.then)?n.then(function(t){return function(e){s(t,e)}}(h),i):s(h,n)})}var s=t.isArray,o=t.isFunction;e.all=i}),t("promise/asap",["exports"],function(t){"use strict";function e(){for(var t=0;t<r.length;t++){var e=r[t];(0,e[0])(e[1])}r=[]}function i(t,e){1===r.push([t,e])&&s()}var s,o="undefined"!=typeof window?window:{},n=o.MutationObserver||o.WebKitMutationObserver,a="undefined"!=typeof global?global:void 0===this?window:this,r=[];s="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?function(){return function(){process.nextTick(e)}}():n?function(){var t=0,i=new n(e),s=document.createTextNode("");return i.observe(s,{characterData:!0}),function(){s.data=t=++t%2}}():function(){return function(){a.setTimeout(e,1)}}(),t.asap=i}),t("promise/config",["exports"],function(t){"use strict";function e(t,e){if(2!==arguments.length)return i[t];i[t]=e}var i={instrument:!1};t.config=i,t.configure=e}),t("promise/polyfill",["./promise","./utils","exports"],function(t,e,i){"use strict";function s(){var t;"Promise"in(t="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self)&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&function(){var e;return new t.Promise(function(t){e=t}),n(e)}()||(t.Promise=o)}var o=t.Promise,n=e.isFunction;i.polyfill=s}),t("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(t,e,i,s,o,n,a,r){"use strict";function h(t){if(!x(t))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof h))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],c(t,this)}function c(t,e){function i(t){m(e,t)}function s(t){v(e,t)}try{t(i,s)}catch(t){s(t)}}function l(t,e,i,s){var o,n,a,r,h=x(i);if(h)try{o=i(s),a=!0}catch(t){r=!0,n=t}else o=s,a=!0;d(e,o)||(h&&a?m(e,o):r?v(e,n):t===T?m(e,o):t===k&&v(e,o))}function u(t,e,i,s){var o=t._subscribers,n=o.length;o[n]=e,o[n+T]=i,o[n+k]=s}function p(t,e){for(var i,s,o=t._subscribers,n=t._detail,a=0;a<o.length;a+=3)i=o[a],s=o[a+e],l(e,i,s,n);t._subscribers=null}function d(t,e){var i,s=null;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(w(e)&&(s=e.then,x(s)))return s.call(e,function(s){if(i)return!0;i=!0,e!==s?m(t,s):f(t,s)},function(e){if(i)return!0;i=!0,v(t,e)}),!0}catch(e){return!!i||(v(t,e),!0)}return!1}function m(t,e){t===e?f(t,e):d(t,e)||f(t,e)}function f(t,e){t._state===M&&(t._state=P,t._detail=e,y.async(g,t))}function v(t,e){t._state===M&&(t._state=P,t._detail=e,y.async(_,t))}function g(t){p(t,t._state=T)}function _(t){p(t,t._state=k)}var y=t.config,w=(t.configure,e.objectOrFunction),x=e.isFunction,b=(e.now,i.all),z=s.race,S=o.resolve,C=n.reject,E=a.asap;y.async=E;var M=void 0,P=0,T=1,k=2;h.prototype={constructor:h,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(t,e){var i=this,s=new this.constructor(function(){});if(this._state){var o=arguments;y.async(function(){l(i._state,s,o[i._state-1],i._detail)})}else u(this,s,t,e);return s},catch:function(t){return this.then(null,t)}},h.all=b,h.race=z,h.resolve=S,h.reject=C,r.Promise=h}),t("promise/race",["./utils","exports"],function(t,e){"use strict";function i(t){var e=this;if(!s(t))throw new TypeError("You must pass an array to race.");return new e(function(e,i){for(var s,o=0;o<t.length;o++)s=t[o],s&&"function"==typeof s.then?s.then(e,i):e(s)})}var s=t.isArray;e.race=i}),t("promise/reject",["exports"],function(t){"use strict";function e(t){return new this(function(e,i){i(t)})}t.reject=e}),t("promise/resolve",["exports"],function(t){"use strict";function e(t){return t&&"object"==typeof t&&t.constructor===this?t:new this(function(e){e(t)})}t.resolve=e}),t("promise/utils",["exports"],function(t){"use strict";function e(t){return i(t)||"object"==typeof t&&null!==t}function i(t){return"function"==typeof t}function s(t){return"[object Array]"===Object.prototype.toString.call(t)}var o=Date.now||function(){return(new Date).getTime()};t.objectOrFunction=e,t.isFunction=i,t.isArray=s,t.now=o}),e("promise/polyfill").polyfill()}(),amp.conf={cache_window:216e5,default_size:190,client_id:null,di_basepath:"https://images.dfs.co.uk/",content_basepath:"https://c1.adis.ws/",err_img:null},function(){amp.init=function(t){for(var e in t)amp.conf.hasOwnProperty(e)&&(amp.conf[e]=t[e])}}();var o=amp.indexOf=function(t,e){"use strict";if(null==t)throw new TypeError;var i=Object(t),s=i.length>>>0;if(0===s)return-1;var o=0;if(arguments.length>1&&(o=Number(arguments[2]),o!=o?o=0:0!=o&&o!=1/0&&o!=-(1/0)&&(o=(o>0||-1)*Math.floor(Math.abs(o)))),o>=s)return-1;for(var n=o>=0?o:Math.max(s-Math.abs(o),0);n<s;n++)if(n in i&&i[n]===e)return n;return-1},n=function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s=i.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var n,a,r=[];for(n in o)t.call(o,n)&&r.push(n);if(e)for(a=0;a<s;a++)t.call(o,i[a])&&r.push(i[a]);return r}}();!function(){function e(t){var e=0;for(var i in t)t.hasOwnProperty(i)&&++e;return e}amp.getAssetURL=function(t){return amp.conf.di_basepath+t.type+"/"+amp.conf.client_id+"/"+t.name};var s=function(t){var e=[];if(t.items||t.set&&t.set.items)for(var i=t.items||t.set.items,o=0;o<i.length;o++){var n=i[o];"video"==n.type?e.push({name:n.name,type:"v"}):(n.items||n.set&&n.set.items)&&(e=e.concat(s(n)))}return e},n=function(t,e){for(var i=[],s=0;s<t.length;s++){for(var o=t[s],n=!1,a=0;a<e.length;a++){var r=e[a];if(r.name===o.name&&r.type===o.type){n=!0;break}}n||i.push(o)}return i},a=function(t,e,i){for(var s in e)if(e.hasOwnProperty(s)){if(o(i,s)!=-1)continue;t[s]=e[s]}return t},r=function(t){for(var e in t)if(t.hasOwnProperty(e))for(var i=t[e],s=0;s<i.media.length;s++)i.media[s].htmlCodec=amp.videoToFormat(i.media[s]);return t},h=function(t,e){for(var i in t)if(t.hasOwnProperty(i)){var s=t[i];s.media=amp.sortVideoSource(s.media,e)}return t},c=function(t,e){for(var i in t){if(t.hasOwnProperty(i))var s=t[i],o=function(t,e){if(t.items||t.set&&t.set.items)for(var i=t.items||t.set.items,s=0;s<i.length;s++){var n=i[s];"video"==n.type&&n.name==e.name?n=a(n,e,["url"]):(n.items||n.set&&n.set.items)&&(n=o(n,e))}return t};e=o(e,s)}return e},l=function(t,e){for(var i in t){if(t.hasOwnProperty(i))var s=t[i],o=function(t,e){if(t.items||t.set&&t.set.items)for(var i=t.items||t.set.items,s=0;s<i.length;s++){var n=i[s];"video"==n.type?i.splice(s,1):(n.items||n.set&&n.set.items)&&(n=o(n,e))}return t};e=o(e,s)}return e};amp.get=function(t,o,a,u,p){var d=0,m=!0,f={},g={},_=0,p=p||6e4,y=function(e){return function(i,o){var a=s(o),p=n(a,t),m=function(){d++,f[i]=o,f[i].url=e,f[i].name=f[i].name?f[i].name:i,d==_&&x()};p.length?amp.get(p,function(t){t=r(t),u&&(t=h(t,u)),o=c(t,o),m()},function(t){o=l(t,o),m()}):(o.media&&(o=r({d:o}).d,u&&(o=h({d:o},u).d)),m())}},w=function(t){return function(e,i){d++,g[e]=i,g[e].url=t,m=!0,d==_&&x()}},x=function(){e(f)>0&&o&&o(f),e(g)>0&&a&&a(g)},b=function(t){return!!(t&&t.type&&t.name)};if(i(t)){_=t.length;for(var z=0;z<_;z++)if(b(t[z])){var S=amp.getAssetURL(t[z]);v(S+".js",t[z].name,y(S),w(S),t.transform,p)}}else{if(_=1,!b(t))return;var S=amp.getAssetURL(t);v(amp.getAssetURL(t)+".js",t.name,y(S),w(S),t.transform,p)}};var u=function(){var t=new Date;return t-=t%amp.conf.cache_window},p=function(t){var e=m[t];e&&e.dispose(),delete d[t],delete f[t],delete m[t]},d=[],m=[],f=[];amp.jsonCache={},amp.jsonReturn=function(t,e){if(d[t]){clearTimeout(f[t]);for(var i=0;i<d[t].length;i++){var s=d[t][i];"error"==e.status?s.fail&&s.fail(t,e):(amp.jsonCache[t]=e,s.win&&s.win(t,e))}p(t)}},amp.get.createScript=function(t,e){var i=document.createElement("script");return i.src=t,i.onerror=e,i.dispose=function(){document.body.removeChild(i)},document.body.appendChild(i),i},amp.clearJsonCache=function(){amp.jsonCache={}};var v=amp.jsonp=function(e,i,s,o,n,a){var a=a||6e4;if(n?n+="&":n="",amp.jsonCache[i])return void s(i,amp.jsonCache[i]);if(d[i])return void d[i].push({win:s,fail:o});d[i]=[{win:s,fail:o}],f[i]=setTimeout(function(){amp.jsonReturn(i,{status:"error",code:404,message:"Not Found",name:i})},a);var r=e+"?"+n+t({deep:!0,timestamp:u(),arg:"'"+i+"'",func:"amp.jsonReturn"});console.log(r);var h=amp.get.createScript(r,function(t){amp.jsonReturn(i,{status:"error",code:404,message:"Not Found",name:i})});m[i]=h}}(),function(){amp.content=function(e,o,n,a){var a=a||6e4;i(e)||(e=[e]),s(e,a,function(e,i){e.length>0&&o(t(e)),i.length>0&&n(i)})};var t=function(t){for(var e=[],i=0;i<t.length;i++)for(var s=t[i].result.payload,o=0;o<s.length;o++){var n=s[o];n.name=n.key.split("/"),n.name=n.name[n.name.length-1],e.push(n)}return e},e=function(t){return amp.conf.content_basepath+"p/"+amp.conf.client_id+"/["+o(t)+"].js"},s=function(t,i,s){for(var o=[],n=[],a=Math.ceil(t.length/10),r=function(t,e){o.push({name:t,result:e}),c()},h=function(t,e){n.push({name:t,result:e}),c()},c=function(){o.length+n.length===a&&s&&s(o,n)},l=0;l<a;l++){var u=t.slice(10*l,10*l+10);amp.jsonp(e(t),u.join(","),r,h,i)}},o=function(t){for(var e=[],i=0;i<t.length;i++)e.push('"/c//'+t[i]+'"');return e.join(",")}}(),function(){amp.genHTML=function(t,e,o,n){if(t){var a={},r=function(t){var i=s(t,o,n);a[t.name]=i,e&&e.appendChild&&e.appendChild(i)};if(i(t))for(var h=0;h<t.length;h++)r(t[h]);else{if("object"!=typeof t)return;r(t)}return a}};var t=function(t){if(!t||!t.src&&!t.url)return!1;for(var e=t.isImage?t.url:t.src,i=amp.di.get(e),s=0;s<i.length;s++){var o=i[s];if(o.width&&"undefined"!=o.width||o.height&&"undefined"!=o.height)return!0}return!1};amp.videoToFormat=function(t){if(t){var e=t.format,i="",s="";switch(e&&e.toLowerCase()){case"flash video":e="flv";break;case"mpeg4":e="mp4"}switch(t["video.codec"]&&t["video.codec"].toLowerCase()){case"h264":break;case"theora":i="theora";break;case"vp8":i="vp8"}switch(t["audio.codec"]&&t["audio.codec"].toLowerCase()){case"aac":"mp4"==e&&(s="mp4a.40.2");break;case"vorbis":s="vorbis"}var o=e?"video/"+e:o;return""!=i&&(o+='; codecs="',o+=i,""!=s&&(o+=", "+s),o+='"'),o}},amp.genVideoHTML=function(e,i){e.src||(e.src=e.url);var s=document.createElement("div");s.setAttribute("id",e.name);var o=document.createElement("video");t(e)?o.setAttribute("poster",e.src):o.setAttribute("poster",amp.di.width(e.src,amp.conf.default_size));try{o.setAttribute("preload","auto")}catch(t){}o.setAttribute("controls","");var n,a=e.media;if(n=i?amp.sortVideoSource(a,i):a)for(var r=0;r<n.length;r++){var a=n[r],h=document.createElement("source");h.setAttribute("src",a.src),h.setAttribute("data-res",a.profileLabel),h.setAttribute("data-bitrate",a.bitrate),h.setAttribute("type",amp.videoToFormat(a)),o.appendChild(h)}return s.appendChild(o),s},amp.sortVideoSource=function(t,e){if(i(e)){if(e.length>0){for(var s=t.length,n=[],a=0;a<e.length;a++)for(var r=0;r<s;r++)e[a]!=t[r].profile&&e[a]!=t[r].profileLabel||n.push(t[r]);for(var r=0;r<s;r++)o(e,t[r].profile)==-1&&o(e,t[r].profileLabel)==-1&&n.push(t[r]);return n}}else if(!isNaN(e))return t.sort(function(t,i){return Math.abs(e-parseInt(t.bitrate))-Math.abs(e-parseInt(i.bitrate))});return t};var e=function(t){var e=t.split("/");return e[e.length-1].split("?")[0]},s=function(i,o,a){var r;if(i.isImage||"img"==i.type){var r=document.createElement("img"),h=i.isImage?i.url:i.src;t(i)||(h=h+"?"+n(i)),o?r.setAttribute("data-amp-src",h):r.setAttribute("src",h),r.setAttribute("class","amp-main-img"),i.name?r.setAttribute("id",i.name):r.setAttribute("id",e(h))}else if("video"==i.type||i.media)r=amp.genVideoHTML(i,a);else if(i.items||i.set.items){var c=i.items||i.set.items,r=document.createElement("ul");r.setAttribute("id",i.name);for(var l=0;l<c.length;l++){var u=document.createElement("li");r.appendChild(u);var p=c[l];p.url=i.url,u.appendChild(s(p,o))}}return r},n=function(t){return t.width>t.height?"w="+amp.conf.default_size:"h="+amp.conf.default_size}}(),function(){var s=[{shortName:"cs",fullName:"grayscale",val:"gray"},{shortName:"dpi",fullName:"dpi",type:"number"},{shortName:"dpiFilter",fullName:"dpiFilter",type:"string"},{shortName:"resize",fullName:"resize",type:"boolean"},{shortName:"filter",fullName:"filter",type:"string"},{shortName:"upscale",fullName:"upscale",type:"boolean"},{shortName:"bg",fullName:"background",type:"string"},{shortName:"qlt",fullName:"quality",type:"number"},{shortName:"cm",fullName:"compositeMode",type:"string"},{shortName:"cs",fullName:"colourSpace",type:"string"},{shortName:"maxW",fullName:"maxWidth",type:"number"},{shortName:"maxH",fullName:"maxHeight",type:"number"},{shortName:"template",fullName:"template",type:"array"},{shortName:"w",fullName:"width",type:"number"},{shortName:"h",fullName:"height",type:"number"},{shortName:"fmt",fullName:"format",type:"string"},{shortName:"unsharp",fullName:"sharpen",type:"string"},{shortName:"crop",fullName:"crop",type:"string"},{shortName:"pcrop",fullName:"preCrop",type:"string"},{shortName:"img404",fullName:"missingImage",type:"string"},{shortName:"sm",fullName:"scaleMode",type:"string"},{shortName:"strip",fullName:"strip",type:"boolean"},{shortName:"orig",fullName:"original",type:"boolean"}],o=function(t,e,i){for(var o=0;o<t.length;o++){"object"==typeof t[o]&&n(t[o]);for(var a in t[o])if(t[o].hasOwnProperty(a))for(var r=0;r<s.length;r++)s[r][e]==a&&(s[r].val&&(t[o][s[r][e]]=s[r].val),s[r][i]!=s[r][e]&&(t[o][s[r][i]]=t[o][a],delete t[o][a]))}return t},a=function(t){for(var e={},i=t.length;i--;){var s="object"==typeof t[i]&&n(t[i]);e[s]&&"template"!=s&&t.splice(i,1),e[s]=!0}return t},r=function(i,s,o){var r=i.split("?"),h=r[1]?e(r[1],function(t,e){t[1]?e[t[0]]=t[1]:e.template=t[0]}):[];if(!h)return!1;if(!s&&!o)return a(h);if(h=a(h),!s&&o){for(var c=[],l=0;l<h.length;l++)if(h[l][o]){if("template"!=o)return h[l][o];c.push(h[l][o])}return c.length>0&&c}h=a(h.concat(s));for(var u=[],l=0;l<h.length;l++){var p=n(h[l]);if("template"==p){var d=h[l][p];if("[object Array]"===Object.prototype.toString.call(d))for(var m=0;m<d.length;m++)u.push(d[m]);else u.push(d)}else u.push(t(h[l]))}return r[0]+"?"+u.join("&")},h=function(t,e,i,s){for(var o in t)if(t.hasOwnProperty(o))if(null!=t[o]&&"object"==typeof t[o]){if(("img"==t[o].type||"set"==t[o].type||"video"==t[o].type)&&i&&i.exclude){for(var n=!1,a=0;a<i.exclude.length;a++)t[o].name==i.exclude[a]&&(n=!0);if(n)continue}h(t[o],e,i,s)}else("src"==o&&("img"==t.type||"set"==t.type||"video"==t.type)||"url"==o&&t.isImage)&&(t[o]=r(t[o],e,s));return t};amp.di.get=function(t){return!!t&&o(r(t),"shortName","fullName")},amp.di.set=function(t,e,s,n){return e&&(e=i(e)?o(e,"fullName","shortName"):o([e],"fullName","shortName")),"string"!=typeof t?h(t,e,s,n):r(t,e,n)},function(){for(var t=0;t<s.length;t++)!function(t){amp.di[t.fullName]=function(e,i){if(e){var s="grayscale"!=t.fullName?t.shortName:null,o=void 0!==t.val?t.val:i;if(void 0!==o){var n={};return n[t.shortName]=o,amp.di.set(e,n,null,s)}var a=amp.di.set(e,null,null,s);switch(t.type){case"number":return Number(a);case"boolean":if("true"==a)return!0;if("false"==a)return!1;case"string":default:return a}}}}(s[t])}()}(),function(){var t=[];t.all=[],amp.stats.bind=function(s){if("function"==typeof s)return void t.all.push(s);if(i(s))for(var o=0;o<s.length;o++)amp.stats.bind(s[o]);else"object"==typeof s&&s.cb&&(s.type&&s.event?e(s.type+"."+s.event,s.cb):s.type?e(s.type,s.cb):s.event&&e(s.event,s.cb))};var e=function(e,i){t[e]?t[e].push(i):t[e]=[i]};amp.stats.event=function(e,i,s,o){var n=[];n=n.concat(t.all,t[i]?t[i]:[],t[s]?t[s]:[],t[i+"."+s]?t[i+"."+s]:[]);for(var a=0;a<n.length;a++)n[a](e,i,s,o)}}()}(),function(t){t.widget("amp.ampStack",{options:{delay:3e3,autoplay:!1,loop:!0,fade:!1,start:1,responsive:!0,center:!1,parentSize:!1,gesture:{enabled:!1,fingers:1,dir:"horz",distance:50},states:{selected:"amp-selected",seen:"amp-seen"}},_getCreateOptions:function(){var e=this.element.data().ampStack;return e?t.extend(!0,{},this.options,e):this.options},_create:function(){var e=this,i=this._children=this.element.children();this.canTouch=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),this.element.addClass("amp"),this.element.addClass("amp-stack"),this.count=this._children.length,this._index=Math.max(1,Math.min(this.options.start,this.count)),i.addClass("amp-layer"),i.css({display:"none"}),i.eq(this._index-1).css("display","block"),i.eq(this._index-1).addClass(this.options.states.selected+" "+this.options.states.seen),this._addGestures(),this.options.autoplay&&this.play(),setTimeout(function(t){return function(){return t._calcSize()}}(e),1),t(window).bind("resize",function(e){return function(){return setTimeout(t.proxy(e._calcSize,e),1)}}(e)),this._track("created",{index:this._index,canNext:this.canNext(),canPrev:this.canPrev()})},_addGestures:function(){if(this.options.gesture.enabled&&this.canTouch){this._startG=function(e){if(e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0]&&e.originalEvent.touches.length!=this.options.gesture.fingers)return!0;if(e.originalEvent&&e.originalEvent.target&&"range"===e.originalEvent.target.type)return!0;this.changed=!1,this.moved=!1,this.startTouchEvent=e;var e=this._getEvent(e);return this.startPos="horz"==this.options.gesture.dir?e.pageX-e.target.offsetLeft:e.pageY-e.target.offsetTop,t(window).on("touchmove",t.proxy(this._moveG,this)),t(window).on("touchcancel",t.proxy(this._stopG,this)),t(window).on("touchend",t.proxy(this._stopG,this)),!0},this._getEvent=function(t){return"touchend"!=t.type&&"touchcancel"!=t.type||(t=this.lastEvent),t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]&&(t=t.originalEvent.touches[0]),t},this._moveG=function(t){return!!(t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]&&t.originalEvent.touches.length!=this.options.gesture.fingers)||(!(!t.originalEvent||!t.originalEvent.target||"range"!==t.originalEvent.target.type)||(this.moved=!0,this.lastEvent=t,t=this._getEvent(t),!("horz"==this.options.gesture.dir?t.pageX-this.startPos:t.pageY-this.startPos!=0)))},this._stopG=function(e){if(t(window).off("touchmove",t.proxy(this._moveG,this)),t(window).off("touchcancel",t.proxy(this._stopG,this)),t(window).off("touchend",t.proxy(this._stopG,this)),this.moved&&!this.changed){this.changed=!0,e=this._getEvent(e);var i="horz"==this.options.gesture.dir?e.pageX-e.target.offsetLeft:e.pageY-e.target.offsetTop,s=i-this.startPos;if(Math.abs(s)<this.options.gesture.distance)return;s>0?this.prev():this.next()}},this._children.on("touchstart",t.proxy(this._startG,this))}},_getIndex:function(t){var e=this._children;if(t>e.length){if(!this.options.loop)return t;for(;t>e.length;)t-=e.length}else if(t<1){if(!this.options.loop)return t;for(;t<1;)t+=e.length}return t},play:function(){var t=this;clearInterval(this.interval),this.interval=setInterval(function(){t.next()},this.options.delay),this._track("play",null)},pause:function(){clearInterval(this.interval),this._track("pause",null)},next:function(){this.goTo(this._index+1)},prev:function(){this.goTo(this._index-1)},redraw:function(){this._calcSize()},_calcSize:function(){var t,e;if(this.options.responsive&&this.options.width&&this.options.height&&"auto"!=this.options.width&&"auto"!=this.options.height)this.options.parentSize?(t=Math.round(this.element.parent().width()),e=Math.round(t*(this.options.height/this.options.width)),e>this.element.parent().height()&&(e=this.element.parent().height(),t=Math.round(e*(this.options.width/this.options.height))),this.element.width(t),this.element.height(e)):(t=Math.round(this.element.width()),e=Math.round(t*(this.options.height/this.options.width)),this.element.height(e)),this.options.center&&(this.element.css("margin-left",this.element.parent().width()/2-t/2+"px"),this.element.css("margin-top",this.element.parent().height()/2-e/2+"px"));else{if(this.options.width&&"auto"!=this.options.width)this.element.width(this.options.width);else if("auto"==this.options.width){for(var i=0,s=0;s<this.count;s++)for(var s=0;s<this.count;s++){var o=this._children.eq(s),n=o.css("display");o.css("display","block"),i=Math.max(o.outerWidth(!0),i),o.css("display",n)}this.element.width(i)}if(this.options.height&&"auto"!=this.options.height)this.element.height(this.options.height);else if("auto"==this.options.height){for(var i=0,s=0;s<this.count;s++)for(var s=0;s<this.count;s++){var o=this._children.eq(s),n=o.css("display");o.css("display","block");var e=o.outerHeight(!0);i=Math.max(o.outerHeight(!0),i),o.css("display",n)}this.element.height(i)}}},_onFinish:function(){for(var t=1,e=this;0!=this._asyncMethods.length;){var i=this._asyncMethods.splice(0,1)[0];i.func&&i.args&&(setTimeout(function(){i&&i.func&&i.func.apply(e,i.args)},t),t++)}},visible:function(t,e){t!=this._visible&&(this._track("visible",{visible:t}),this._visible=t,this.callChildMethod(this._children.eq(this._index-1),"visible",t),t&&this._calcSize())},callChildMethod:function(e,i,s){var o=function(e){for(var n=0;n<e.length;n++){var a=!1,r=t(e[n]),h=r.data();for(var c in h)if(h.hasOwnProperty(c)){var l=h[c];l[i]&&"function"==typeof l[i]&&"amp"==c.substring(0,3)&&(l[i](s),a=!0)}a||o(r.children())}};o(e.children())},goTo:function(t,e,i){if(t=parseInt(t),!isNaN(t)){if(this._animating)return void this._asyncMethods.push({func:this.goTo,args:arguments});if(e||this._exeBinds(t,"goTo"),this._getIndex(t)!=this._index){if(t>this.count){if(!this.options.loop)return;for(;t>this.count;)t-=this.count;this._track("looped","forwards")}else if(t<1){if(!this.options.loop)return;for(;t<1;)t+=this.count;this._track("looped","backwards")}i||this._animate(t)}}},_exeBinds:function(e,i){if(this._boundArray)for(var s=0;s<this._boundArray.length;s++){var o=this._boundArray[s];if(!i||i==o.on){var n=t(o.selector),a=n.data();for(var r in a)if(a.hasOwnProperty(r)){var h=a[r];h[o.action]&&"amp"==r.substring(0,3)&&h[o.action](e,!0)}}}},_numToIndex:function(t){if(t>this.count){if(!this.options.loop)return this.count;for(;t>this.count;)t-=this.count}else if(t<1){if(!this.options.loop)return 1;for(;t<1;)t+=this.count}return t},bind:function(t){this._boundArray||(this._boundArray=[]),this._boundArray.push(t)},canPrev:function(){return this.options.loop||this._index>1},canNext:function(){return this.options.loop||this._index<this.count},_animate:function(t){var e=this.element,i=e.children("li").eq(this._index-1),s=e.children("li").eq(t-1);i.removeClass(this.options.states.selected),this.options.fade?i.fadeOut():i.css("display","none"),s.addClass(this.options.states.selected+" "+this.options.states.seen),this.options.fade?s.fadeIn():s.css("display","block"),this._setIndex(t)},_setIndex:function(t,e){if(!e){var i=this._children.eq(this._index-1),s=this._children.eq(t-1);this.callChildMethod(s,"visible",!0),this.callChildMethod(i,"visible",!1)}this._index=t,this._track("change",{index:t,canPrev:this.canPrev(),canNext:this.canNext()})},
_track:function(t,e){this._trigger(t,null,e),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"stack",t,e)},_destroy:function(){this.element.removeClass("amp"),this.element.removeClass("amp-stack"),this._removeEmptyAttributeHelper(this.element);var e=this._children;e.removeClass("amp-layer"),e.removeClass(this.options.states.selected),e.removeClass(this.options.states.seen),e.css("display","");for(var i=0,s=e.length;i<s;i++)this._removeEmptyAttributeHelper(t(e[i]))},_removeEmptyAttributeHelper:function(t,e){for(var i=e||["class","style"],s=0,o=i.length;s<o;s++)t.attr(i[s])&&t.prop(i[s])||t.removeAttr(i[s])}})}(jQuery),function(t){t.widget("amp.ampCarousel",t.amp.ampStack,{options:{animDuration:250,easing:"",dir:"horz",animate:!0,layout:"standard",start:1,preferForward:!1,no3D:!1,thumbWidthExceed:0,gesture:{enabled:!1,fingers:2,distance:50},onActivate:{select:!0,goTo:!0},preloadNext:!0,responsive:!0,states:{visible:"amp-visible",partiallyVisible:"amp-partially-visible"}},_getCreateOptions:function(){var e=this.element.data().ampCarousel;return e?t.extend(!0,{},this.options,e):this.options},_layoutManagers:{},_create:function(){this._elms=[],this._visible=0,this._asyncMethods=[],this._canNext=!0;var e=this;if(this.options.delay=Math.max(this.options.delay,this.options.animDuration+1),this.options.animDuration=this.options.animate?this.options.animDuration:1,this.canTouch=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),this.element.addClass("amp"),this.element.addClass("amp-carousel"),this.element.wrapInner("<div class='amp-anim-container' style='width:100%;height:100%;position:absolute'></div>"),this._container=this.element.children().eq(0),this._containerPos=0,this._children=this.element.children().eq(0).children(),this.count=this._children.length,this._checkCSS3(),this._index=Math.max(1,Math.min(this.options.start,this.count)),this._selectedIndex=this._index,this._children.addClass("amp-slide"),this._calcSize(),this._chooseLayoutManager(),this._children.eq(this._index-1).addClass(this.options.states.selected),this.options.onActivate.goTo||this.options.onActivate.select)for(var i=0;i<this.count;i++){var s=function(){e.moved=!1,setTimeout(function(){t(window).on(this.canTouch?"touchmove":"mousemove",t.proxy(o,e))},1)},o=function(){e.moved=!0},n=function(i){var s=e;return function(n){return t(window).off(this.canTouch?"touchmove":"mousemove",t.proxy(o,e)),!!s.moved||(s.options.onActivate.goTo&&s.goTo(i),s.options.onActivate.select&&s.select(i),!0)}}(i+1);this._children.eq(i).on(this.canTouch?"touchstart":"mousedown",t.proxy(s,e)),this._children.eq(i).on(this.canTouch?"touchend":"mouseup",t.proxy(n,e))}this._calcSize(),setTimeout(t.proxy(this._calcSize,this),1),this.options.responsive&&t(window).bind("resize",function(e){return function(){return setTimeout(t.proxy(e.redraw,e),1)}}(e)),this.options.autoplay&&this.play(),this._preloadNext(),this._track("created",{index:this._index,canNext:this.canNext(),canPrev:this.canPrev(),visible:this._visible,count:this.count})},_chooseLayoutManager:function(){var t,e;if("[object Array]"===Object.prototype.toString.call(this.options.layout)){for(var i=0;i<this.options.layout.length;i++)if(e=this._layoutManagers[this.options.layout[i]],this.checkFeatures(e)){t=e;break}}else e=this._layoutManagers[this.options.layout],this.checkFeatures(e)&&(t=e);t||(t=this._layoutManagers.standard),this._layoutManager=t.create(this)},_calcSize:function(){this._super(),this._layoutManager&&this._layoutManager.layout(this._index),this._track("resized",{index:this._index,canNext:this.canNext(),canPrev:this.canPrev(),visible:this._visible,count:this.count})},_firstCharLowerCase:function(t){return t.substr(0,1).toLowerCase()+t.substr(1)},_dashConvert:function(t){for(var e="",i=0;i<t.length;i++){var s=t.substr(i,1);e+=s===s.toUpperCase()?"-"+s.toLowerCase():s}return e},_checkCSS3:function(){var t=["","Webkit","Moz","O","ms","Khtml"],e=[{name:"transform",dom:"Transform"},{name:"transition",dom:"Transition"},{name:"transitionDuration",dom:"TransitionDuration"},{name:"transitionTimingFunction",dom:"TransitionTimingFunction"},{name:"anim",dom:"AnimationName"}],i=this.element[0],s=document.createElement("p");this._canCSS3={},document.body.insertBefore(s,null);for(var o=0;o<t.length;o++)for(var n=t[o],a=0;a<e.length;a++){var r=e[a];this._canCSS3[r.name]||(void 0!==i.style[n+r.dom]&&(this._canCSS3[r.name]=n+r.dom),void 0!==i.style[n+this._firstCharLowerCase(r.dom)]&&(this._canCSS3[r.name]=n+this._firstCharLowerCase(r.dom)))}if(this._canCSS3.transform&&!this.options.no3D&&void 0!==s.style[this._canCSS3.transform]){s.style[this._canCSS3.transform]="translate3d(1px,1px,1px)";var h=window.getComputedStyle(s).getPropertyValue(this._dashConvert(this._canCSS3.transform));this._canCSS3.can3D=null!=h&&""!=h}document.body.removeChild(s)},_direction:function(t){if(!this.options.loop)return t>this._index;var e=0,i=0;this._index=Math.min(this._index,this.count);for(var s=this._index;s!=t;)s>this.count?s=1:(s++,e++);for(s=this._index;s!=t;)s<1?s=this.count:(s--,i++);return!!(this.options.preferForward&&e>1&&i>1)||e<=i},_loopIndex:function(t,e,i){for(var s=t?1:-1,o=e,n=0;n<i;n++)o+s>this.count?o=1:o+s<1?o=this.count:o+=s;return o},_loopCount:function(t,e,i){i=Math.min(i,this.count);for(var s=t?1:-1,o=e,n=0;o!=i;)n++,o+s>this.count?o=1:o+s<1?o=this.count:o+=s;return n},_resetPos:function(t){this._canCSS3.transform&&this._canCSS3.transition?t.css(this._canCSS3.transform,""):"horz"==this.options.dir?t.css("left",""):t.css("top","")},_removeStates:function(){this._children.removeClass(this.options.states.visible),this._children.removeClass(this.options.states.partiallyVisible)},_setState:function(t,e){switch(e){case"visible":t.addClass(this.options.states.visible),t.addClass(this.options.states.seen),this.callChildMethod(t,"visible",!0);break;case"invisible":t.removeClass(this.options.states.visible),this.callChildMethod(t,"visible",!1);break;case"partial":t.addClass(this.options.states.partiallyVisible),this.callChildMethod(t,"visible",!1)}},_posElm:function(t,e,i,s){this._elms[i]||(this._elms[i]=0);var o=s?this._elms[i]+e:e;this._canCSS3.transform&&this._canCSS3.transition?this._canCSS3.can3D?"horz"==this.options.dir?t.css(this._canCSS3.transform,"translate3d("+o+"px,0,0)"):t.css(this._canCSS3.transform,"translate3d(0,"+o+"px,0)"):"horz"==this.options.dir?t.css(this._canCSS3.transform,"translate("+o+"px,0)"):t.css(this._canCSS3.transform,"translate(0,"+o+"px)"):"horz"==this.options.dir?t.css("left",o+"px"):t.css("top",o+"px"),this._elms[i]=o},_preloadNext:function(){if(this.options.preloadNext){var t=this._visible+(this._index-1),e=this._loopIndex(!0,t,1),i=this._children.eq(e-1);this.callChildMethod(i,"preload",!0)}},_measureElements:function(t,e,i){for(var s=0,o=(this.options.dir,0);o<i;o++){var n=t?e+o:e-o;n>this.count&&(n=1),n<1&&(n=this.count),s+=this._measureElement(n-1)}return t?0-s:s},_moveElements:function(t,e,i){var s=this._container,o=this;if(this._containerPos==t)return o._canCSS3.transform&&o._canCSS3.transitionDuration&&(s.css(o._canCSS3.transitionTimingFunction,""),s.css(o._canCSS3.transitionDuration,"")),void(e&&e());if(this._containerPos=t,!i){if(o._canCSS3.transform&&o._canCSS3.transitionDuration){var n=o._canCSS3.can3D?"horz"==o.options.dir?"translate3d("+t+"px,0,0)":"translate3d(0, "+t+"px,0)":"horz"==o.options.dir?"translateX("+t+"px)":"translateY("+t+"px";s.css(o._canCSS3.transform,n)}else"horz"==o.options.dir?s.css("left",t+"px"):s.css("top",t+"px");return void(e&&e())}if(o._canCSS3.transform&&o._canCSS3.transitionDuration){var n=o._canCSS3.can3D?"horz"==o.options.dir?"translate3d("+t+"px,0,0)":"translate3d(0, "+t+"px,0)":"horz"==o.options.dir?"translateX("+t+"px)":"translateY("+t+"px";s.css(o._canCSS3.transform,n),s.css(o._canCSS3.transitionTimingFunction,o.options.easing),s.css(o._canCSS3.transitionDuration,o.options.animDuration+"ms"),s.off().on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){s.css(o._canCSS3.transitionTimingFunction,""),s.css(o._canCSS3.transitionDuration,""),e&&e()})}else{var a={};"horz"==o.options.dir?a.left=t+"px":a.top=t+"px",s.animate(a,o.options.animDuration,"swing",e)}},_measureElement:function(t){var e,i="horz"==this.options.dir,s=this._children.eq(t);return s.css("display","block"),e=i?s.outerWidth(!0):s.outerHeight(!0),s.css("display",""),e},_elmSize:function(){return"horz"==this.options.dir?this.element.width():this.element.height()},_animate:function(t){var e=this;this._animating=!0,this._layoutManager.focus(t,!0,function(){e._setIndex(t)})},_setIndex:function(t){this._index=t,this._track("change",{index:this._index,canNext:this.canNext(),canPrev:this.canPrev(),visible:this._visible,count:this.count}),this._animating=!1,this._preloadNext(),this._onFinish()},_track:function(t,e){this._trigger(t,null,e),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"carousel",t,e)},_destroy:function(){this.element.removeClass("amp"),this.element.removeClass("amp-carousel"),this._removeEmptyAttributeHelper(this.element);var t=this._children;t.removeClass("amp-slide"),t.removeClass(this.options.states.visible),t.removeClass(this.options.states.partiallyVisible),t.removeClass(this.options.states.selected),t.removeClass(this.options.states.seen);for(var e=0;e<t.length;e++){var i=t.eq(e);this._resetPos(i,0),this._removeEmptyAttributeHelper(i)}this._container.replaceWith(t)},checkFeatures:function(t){if(t){if(t.requiredFeatures){for(var e=!0,i=0;i<t.requiredFeatures.length;i++){var s=t.requiredFeatures[i];this._canCSS3[s]||(e=!1)}return e}return!0}return!1},canNext:function(){return this.options.loop||this._canNext&&this._index<this.count},redraw:function(){return this._animating?void this._asyncMethods.push({func:self._calcSize,args:arguments}):this._calcSize()},select:function(t,e){var i=this._numToIndex(t),s=this._children.eq(this._selectedIndex-1),o=this._children.eq(i-1);s.removeClass(this.options.states.selected),o.addClass(this.options.states.selected+" "+this.options.states.seen),this._selectedIndex=i,o.hasClass(this.options.states.visible)||this.goTo(i,e),e||this._exeBinds(i,"select"),this._preloadNext(),this._track("selected",{index:i})}}),function(){var e=function(e,i){function s(){this.name="standard",this.options=i,this.duplicated=[]}var o=s.prototype;o.init=function(){e.canTouch&&e.options.gesture.enabled&&e._children.on("touchstart",t.proxy(this.start,this))},o.start=function(i){if(!this.animating){if(i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&i.originalEvent.touches.length!=e.options.gesture.fingers)return!0;this.duplicationOffsets={},this.duplicationOffsets.left=0,this.duplicationOffsets.leftSize=0,this.duplicationOffsets.right=0,this.duplicationOffsets.rightSize=0,this.changed=!1,this.startPos=e._containerPos,this.moved=!1,this.startTouchEvent=i;var i=this.getEvent(i);return this.xo=i.pageX-e._containerPos,this.yo=i.pageY-e._containerPos,this.xo2=i.pageX,this.yo2=i.pageY,t(window).on("touchmove",t.proxy(this.move,this)),t(window).on("touchcancel",t.proxy(this.stop,this)),t(window).on("touchend",t.proxy(this.stop,this)),!0}},o.move=function(t){if(t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]&&t.originalEvent.touches.length!=e.options.gesture.fingers)return!0;this.moved=!0,this.lastEvent=t,t=this.getEvent(t);var i=t.pageX-this.xo,s=t.pageY-this.yo,o=t.pageX-this.xo2,n=t.pageY-this.yo2;if(this.moveDir||(Math.abs(o)<Math.abs(n)?this.moveDir="vert":Math.abs(o)>Math.abs(n)?this.moveDir="horz":this.moveDir=e.options.dir),e.options.dir!=this.moveDir)return!0;var a="horz"==e.options.dir?i:s;return e._moveElements(a,null,!1),e.options.loop&&this.checkDuplicate(a),e.options.dir!=this.moveDir&&void 0},o.checkDuplicate=function(t){t-this.metrics[this.lastOne-1].size<0-(this.allSize-e._elmSize())&&this.duplicateSlide(!0),0-t-this.metrics[0].size<=0-this.duplicationOffsets.leftSize&&this.duplicateSlide(!1)},o.duplicateSlide=function(t){if(t){var i=e._numToIndex(e._index-1+e.count+this.duplicationOffsets.right+1)-1,s=e._children.eq(i),o=s.clone();e._container.append(o);var n="horz"==e.options.dir?o.width():o.height(),a=this.allSize;e._posElm(o,a,this.count+this.duplicated.length),this.duplicated.push(o),this.duplicationOffsets.right++,this.duplicationOffsets.rightSize+=n,this.lastOne=i+1,this.allSize+=n}else{var i=e._numToIndex(e._index-1-this.duplicationOffsets.left)-1,s=e._children.eq(i),o=s.clone();e._container.append(o);var n="horz"==e.options.dir?o.width():o.height(),a=0-this.duplicationOffsets.leftSize-n;e._posElm(o,a,this.count+this.duplicated.length),this.duplicated.push(o),this.duplicationOffsets.left++,this.duplicationOffsets.leftSize+=n}},o.stop=function(i){if(t(window).off("touchmove",t.proxy(this.move,this)),t(window).off("touchcancel",t.proxy(this.stop,this)),t(window).off("touchend",t.proxy(this.stop,this)),this.moveDir=null,this.moved&&!this.changed){var s=this.findNearest(),o=s.index+1;if(o==e._index){var n=this.startPos-e._containerPos;return Math.abs(n)>=e.options.gesture.distance?n>0?e.canNext()?e.next():e._moveElements(this.startPos,null,!0):e.canPrev()?e.prev():e._moveElements(this.startPos,null,!0):e._moveElements(this.startPos,null,!0),this.changed=!0,void(e.options.loop&&(e._containerPos=0))}e.options.loop?(this.animating=!0,e._moveElements(s.pos,t.proxy(function(){this.allSize=this.oAllSize,this.focus(o,!1),e._containerPos=0,e._setIndex(o),e.goTo(o,null,!0),this.changed=!0,this.animating=!1},this),!0)):(this.changed=!0,e.goTo(o))}},o.getEvent=function(t){return"touchend"!=t.type&&"touchcancel"!=t.type||(t=this.startTouchEvent),t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]&&(t=t.originalEvent.touches[0]),t},o.findNearest=function(){var t=0,i=e._containerPos,s=this.oAllSize,o=0;if(e.options.loop){for(;i<0-this.oAllSize;)i+=this.oAllSize,o--;for(;i>0;)i-=this.oAllSize,o++}for(var n=0;n<this.metrics.length;n++){var a=Math.abs(i+this.metrics[n].pos);a<s&&(s=a,t=n)}var r=e._numToIndex(e._index+e.count-1)-1,a=Math.abs(i+(this.metrics[r].pos+this.metrics[r].size));return a<s&&(s=a,t=e._index-1,i+=this.oAllSize),{index:t,pos:i>=0?this.metrics[t].pos+this.oAllSize*(o-1):0-this.metrics[t].pos+this.oAllSize*o}},o.layout=function(t){e.options.loop?(this.arrange(t),this.focusLoop(t,!1)):(this.arrange(1),this.focusNoLoop(t,!1))},o.focus=function(t,i,s){e.options.loop?this.focusLoop(t,i,s):(this.focusNoLoop(t,i),s&&s())},o.focusNoLoop=function(t,i){var s=0-this.metrics[t-1].pos,o=0-(this.allSize-e._elmSize());s=Math.min(Math.max(o,s),0),this.setVisibleStates(t,s),e._moveElements(s,null,i)},o.setVisibleStates=function(t,i){var i=Math.abs(i);e._removeStates();for(var s=0,o=0;o<this.metrics.length;o++){var n=this.metrics[o].pos,a=e._children.eq(o),r=this.metrics[o].size,h=2*parseFloat(e._children.eq(o).css("margin-right"));n>=i&&n+r-e.options.thumbWidthExceed-h-i<=e._elmSize()?(e._setState(a,"visible"),s++):n+r-h>i&&n+r-h-i<e._elmSize()||n>i&&n-i<e._elmSize()?e._setState(a,"partial"):e._setState(a,"invisible")}e._visible=s},o.focusLoop=function(t,i,s){var o=this,n=e._direction(t),a=n?0-this.metrics[t-1].pos:this.allSize-this.metrics[t-1].pos;e._loopCount(n,e._index,t);this.duplicate(n),this.setVisibleStates(t,a),e._moveElements(a,function(){for(e._container[0].style[e._canCSS3.transform]="","horz"===e.options.dir?e._container[0].style.left="":e._container[0].style.top="",o.arrange(t);o.duplicated.length>0;){var i=o.duplicated.splice(0,1);i[0].remove(),delete i[0]}s&&s()},i)},o.duplicate=function(t){for(var i=0;i<e.count;i++){var s=e._children.eq(i),o=s.clone();e._container.append(o);var n=t?this.metrics[i].pos+this.allSize:this.metrics[i].pos-this.allSize;e._posElm(o,n,this.count+this.duplicated.length),this.duplicated.push(o)}},o.arrange=function(t){var i=0,s=[],o=[];e._removeStates();for(var n=0;n<e.count;n++){var a=n;if(void 0!==t)for(a+=t-1;a>=e.count;)a-=e.count;var r=e._children.eq(a),h=e._measureElement(a);h+i<=e._elmSize()?e._setState(r,"visible"):i<e._elmSize()?e._setState(r,"partial"):e._setState(r,"invisible"),s[a]={},s[a].size=h,s[a].pos=i,e._posElm(r,i,a),o[a]=h,i+=h}return e.options.loop&&(e._containerPos=0),this.lastOne=t,delete this.metrics,this.metrics=s,this.allSize=i,this.oAllSize=i,{allSize:i,metrics:s}};var n=new s;return n.init(),n};t.amp.ampCarousel.prototype._layoutManagers.standard={requiredFeatures:null,create:e}}(),function(){var e=function(e,i){function s(){this.name="carousel3D",this.options=i,this.styles=[],this.angles=[]}var o=e._canCSS3.transform,n=s.prototype;n.init=function(){var i=this;this.element=e._container[0],this.rotation=0,this.panelCount=e.count,this.totalPanelCount=this.element.children.length,this.theta=0,this.isHorizontal="horz"==e.options.dir,e._container.css("perspective","1000px"),this.modify(),setTimeout(function(){i.animation(!0)},10),e.canTouch&&e.options.gesture.enabled&&e._children.on("touchstart",t.proxy(this.start,this))},n.animation=function(t){t?(e._children.css("transitionTimingFunction",e.options.easing),e._children.css("transitionDuration",e.options.animDuration+"ms")):(e._children.css("transitionTimingFunction",""),e._children.css("transitionDuration",""))},n.start=function(i){if(i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&i.originalEvent.touches.length!=e.options.gesture.fingers)return!0;var i=this.getEvent(i);this.xo=i.pageX-i.target.offsetLeft,this.yo=i.pageY-i.target.offsetTop,this.changed=!1,this.moved=!1,this.animation(!1),this.startPos=this.rotation,t(window).on("touchmove",t.proxy(this.move,this)),t(window).on("touchcancel",t.proxy(this.stop,this)),t(window).on("touchend",t.proxy(this.stop,this))},n.move=function(t){if(t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]&&t.originalEvent.touches.length!=e.options.gesture.fingers)return!0;this.lastEvent=t,this.moved=!0,t=this.getEvent(t);var i=t.pageX-this.xo,s=this.yo-t.pageY,o="horz"==e.options.dir?i:s;return o=o>0?Math.min(this.theta/2,o/10):Math.max(0-this.theta/2,o/10),this.rotation=this.startPos+o,this.transform(),!1},n.getEvent=function(t){return"touchend"!=t.type&&"touchcancel"!=t.type||(t=this.lastEvent),t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]&&(t=t.originalEvent.touches[0]),t},n.stop=function(i){if(t(window).off("touchmove",t.proxy(this.move,this)),t(window).off("touchcancel",t.proxy(this.stop,this)),t(window).off("touchend",t.proxy(this.stop,this)),this.animation(!0),this.moved&&!this.changed){i=this.getEvent(i);var s=i.pageX-this.xo,o=this.yo-i.pageY,n="horz"==e.options.dir?s:o;if(this.rotation=this.startPos,Math.abs(n)>=e.options.gesture.distance)if(n<0){if(e.canNext())return void e.next()}else if(e.canPrev())return void e.prev();this.transform(),this.changed=!0}},n.modify=function(){var t,i,s;for(this.xOffset=e._container.width()/2-e._children.eq(0).width()/2,this.yOffset=e._container.height()/2-e._children.eq(0).height()/2,this.panelSize=this.isHorizontal?e._children.eq(0).width():e._children.eq(0).height(),this.rotateFn=this.isHorizontal?"rotateY":"rotateX",this.theta=360/this.panelCount,this.radius=Math.round(this.panelSize/2/Math.tan(Math.PI/this.panelCount)),delete this.styles,delete this.angles,this.styles=[],this.angles=[],s=0;s<this.panelCount;s++)(t=this.element.children[s])&&(i=this.theta*s,this.angles[s]=i,this.styles[s]=this.rotateFn+"("+i+"deg) translateZ("+this.radius+"px)",t.style[o]=this.styles[s],"horz"==e.options.dir?t.style.left=this.xOffset+"px":t.style.top=this.yOffset+"px");for(;s<this.totalPanelCount;s++)(t=this.element.children[s])&&(t.style.opacity=0,t.style[o]="none");this.rotation=Math.round(this.rotation/this.theta)*this.theta,this.transform()},n.transform=function(){for(var t=0;t<this.panelCount;t++)if(this.element.children[t]){for(var e=this.angles[t]+this.rotation;e>360;)e-=360;for(;e<0;)e+=360;var i;i=e<=180?180-e:e-180,this.element.children[t].style.zIndex=i,this.element.children[t].style[o]="translateZ(-"+this.radius+"px) "+this.rotateFn+"("+this.rotation+"deg)"+this.styles[t]}},n.focus=function(t,i,s){var o=e._direction(t),n=e._loopCount(o,e._index,t),a=e._children.eq(t-1),r=e._children.eq(e._index-1);e._setState(a,"visible"),e._setState(r,"invisible"),o?this.rotation-=this.theta*n:this.rotation+=this.theta*n,this.transform(),s&&s()},n.layout=function(t){this.modify(),this.focus(t)};var a=new s;return a.init(),a};t.amp.ampCarousel.prototype._layoutManagers.carousel3D={requiredFeatures:["can3D","transform"],create:e}}()}(jQuery),function(t){t.widget("amp.ampImage",{options:{errImg:null,preload:"visible",insertAfter:!1},_loadedHistory:[],_getCreateOptions:function(){var e=this.element.data().ampImage;return e?t.extend(!0,{},this.options,e):this.options},_create:function(){this.element.addClass("amp"),this.element.addClass("amp-image");var e=this;this.element.bind("load",function(t){e._loaded()}),this.element.bind("error",function(){e._failLoad()}),t.inArray(this.options.preload,["created","visible","none"])==-1&&(this.options.preload="visible"),"created"==this.options.preload&&this.newLoad(),this._track("created")},dimensionsParams:function(e){var i=this,s=i.element.data("amp-dimensions"),o=e;if(!s)return o;var n=o.indexOf("?")===-1?"?":"&",a="";return t.each(s[0],function(e,s){var r=new RegExp(n+e+"=[0-9]*","g"),h=o.match(r);h&&h.length>0&&t.each(h,function(t,e){o=o.replace(e,"")});var c="window"===s.domName?t(window):i.element.closest(s.domName);a+=n+e+"="+parseFloat(c[s.domProp](),10),n="&"}),o+=a},newLoad:function(){var e=this.element.attr("src")&&""!=this.element.attr("src")?this.element.attr("src"):this.element.attr("data-amp-src");if(e=this.dimensionsParams(e),t.inArray(e,this._loadedHistory)!==-1)return this.loading&&this.loading.remove(),this.element.attr("src",e),void this.element.show();this.loading||(this.loading=t('<div class="amp-loading"></div>')),this.element.hide(),this.options.insertAfter?this.options.insertAfter.prepend(this.loading):this.element.parent().append(this.loading),this.element.attr("src",""),this.element.attr("src",e)},visible:function(t){t&&t!=this._visible&&"visible"==this.options.preload&&this.newLoad(),this._visible=t},load:function(t){this.loaded||this.loading||this.newLoad()},preload:function(){this.element.parent().hasClass("amp-spin")||this.newLoad()},loaded:!1,_loaded:function(){this._loadedHistory.push(this.element.attr("src")),this._track("loaded",!0),this.loaded=!0,this.loading&&this.loading.remove(),this.element.show()},_failLoad:function(){this.options.errImg?this.element.attr("src",this.options.errImg):window.amp&&amp.conf&&amp.conf.err_img&&this.element.attr("src",amp.conf.err_img)},_track:function(t,e){this._trigger(t,null,e),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"image",t,e)},_destroy:function(){this.element.removeClass("amp"),this.element.removeClass("amp-image"),this.loading&&this.loading.remove(),this.element.css("display",""),this._removeEmptyAttributeHelper(this.element)},_removeEmptyAttributeHelper:function(t,e){for(var i=e||["class","style"],s=0,o=i.length;s<o;s++)t.attr(i[s])&&t.prop(i[s])||t.removeAttr(i[s])}})}(jQuery),function(t){t.widget("amp.ampBuild",{options:{},_create:function(){for(var e in t.amp)t.amp.hasOwnProperty(e)&&this.element.find("[data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+"]")[e]();this._track("created")},_track:function(t,e){this._trigger(t,null,e),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"build",t,e)}})}(jQuery),function(t){t.widget("amp.ampNav",{options:{},_getCreateOptions:function(){var e=this.element.data().ampNav;return e?t.extend(!0,{},this.options,e):this.options},_create:function(){var t=this.element.data();for(var e in t)if(t.hasOwnProperty(e)){var i=t[e];i.bind&&"amp"==e.substring(0,3)&&i.bind(this.options)}this._track("created")},_track:function(t,e){window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"navigation",t,e)}})}(jQuery),function(t){var e={top:0,left:0,opacity:0,width:"",height:""};t.widget("amp.ampZoom",{options:{zoom:3,url:"",activate:{touch:"up",mouse:"up"},pan:!1,map:!1,target:{},lens:!0,fade:!0,preload:{image:"created",zoomed:"none"},responsive:!0,cursor:{active:"auto",inactive:"auto"},transforms:"",states:{active:"amp-active",inactive:"amp-inactive"},width:"auto",height:"auto",create:function(){},created:function(){},zoomedIn:function(){},zoomedOut:function(){},move:function(){},startMove:function(){},stopMove:function(){},startPreload:function(){},preloaded:function(){},visible:function(){}},_zoomLoaded:!1,_getCreateOptions:function(){this.validTypes=this._createValidTypes(this.options);var e=this.element.data().ampZoom;return e?t.extend(!0,{},this.options,e):this.options},_createValidTypes:function(t){var e={};for(var i in t)if(t.hasOwnProperty(i)){var s,o=t[i];s="width"==i||"height"==i?"number":typeof o,e[i]="object"==typeof o?this._createValidTypes(o):{type:s,defaultValue:o}}return e},_checkValidTypes:function(t,e){return t},_create:function(){this.options=this._checkValidTypes(this.options,this.validTypes),t.isArray(this.options.zoom)&&(this._cycle={current:-1,len:this.options.zoom.length});var i=["created","visible","none"];t.inArray(this.options.preload.image,i)==-1&&(this.options.preload.image="created"),t.inArray(this.options.preload.zoomed,i)==-1&&(this.options.preload.zoomed="none"),this.element.addClass("amp amp-zoom"),this.element.wrap('<div class="amp-zoom-container"></div>'),this.parent=this.element.parent(),this.parent.prepend(this.loading),this.element.wrap('<div class="amp-zoom-overflow"></div>'),this.overflow=this.element.parent(),this.wrapper=t('<div class="amp-zoom-wrapper"></div>'),this.imgs=[];var s=0;do{var o=t('<img class="amp-zoom-img">');o.css(e),this.wrapper.append(o),this.imgs.push(o),s++}while(s<(this._cycle&&this._cycle.len));if(this.options.responsive&&this.element.css({height:"auto",width:"100%",maxWidth:"100%"}),this.options.target){this.mark=this.options.map?{name:"map",inner:"inner"}:{name:"box",inner:"wrapper"};try{this[this.mark.name]=t("body").find(this.options.target)}catch(t){this[this.mark.name]=!1}this[this.mark.name]&&this[this.mark.name].length>0?(this.options.lens&&(this.lens=t('<div class="amp-zoom-lens"></div>'),"map"==this.mark.name?(this[this.mark.name].addClass("amp-zoom-map"),this[this.mark.inner]=t('<div class="amp-zoom-wrapper"></div>'),this[this.mark.inner].append(t('<img class="amp-main-img" src="'+this.element.attr("src")+'">')),this[this.mark.inner].append(this.lens)):(this[this.mark.name].addClass("amp-zoom-container"),this.parent.append(this.lens))),this[this.mark.inner].hide(),this[this.mark.name].append(this[this.mark.inner]),this[this.mark.inner].addClass(this.options.states.inactive),this[this.mark.inner][0].relatedUUID=this.uuid):this[this.mark.name]=!1}this.box||(this.overflow.append(this.wrapper),this.canHideEl=!!t.amp.ampImage),this.target=this.imgs[0],this._setZoomCursor(this.parent),this.parent.addClass(this.options.states.inactive),("created"==this.options.preload.image||this.element[0].src)&&this._loadImage(),"created"==this.options.preload.zoomed&&this._loadZoomed()},_onImageLoad:function(){if(!this._imageLoaded){this._track("loaded",!0),this._imageLoaded=!0,this._imageLoading=!1,this._originalImage=this._getNaturalSize(this.element[0].src);var e=this;this._calcSize(),this.options.responsive&&t(window).bind("resize",function(t){return function(){return t.zoomed&&t.zoom(!1),t._calcSize()}}(e)),this.moved=!1,this.canTouch=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),this.zoomBy=1,this.pos={start:{x:0,y:0},last:{x:0,y:0},cur:{x:0,y:0}};var i=function(){var i=function(t){return e.moved=!0,!0},s=function(t){return o(),!0},o=function(n){if(e.pos.cur=e.pos.last,e.mousedown=!1,e.parent.off(e.canTouch?"touchmove":"mousemove",t.proxy(i,e)),e.canTouch||e.parent.off("mouseleave",t.proxy(s,e)),e.parent.off(e.canTouch?"touchend":"mouseup",t.proxy(o,e)),!e.moved)return e.toggle(n)},n=function(n){e.zoomed&&(n.stopPropagation(),n.preventDefault()),e.mousedown=!0;var a=e._getEvent(n);e.pos.start={x:a.pageX,y:a.pageY},setTimeout(function(){e.parent.on(e.canTouch?"touchmove":"mousemove",t.proxy(i,e)),e.parent.on(e.canTouch?"touchend":"mouseup",t.proxy(o,e))},1),e.canTouch||e.parent.on("mouseleave",t.proxy(s,e)),e.moved=!1;n.timeStamp;return e.startTouchEvent=n,!0};e.parent.on(e.canTouch?"touchstart":"mousedown",t.proxy(n,e))};if(this.canTouch){if("disable"==this.options.activate.touch)return!1;if("doubleTap"==this.options.activate.touch){this._lastEvent="";var s=function(i){e.parent.on("touchend touchcancel",t.proxy(o,e)),this.startTouchEvent=i;var i=this._getEvent(i);e.pos.start={x:i.pageX,y:i.pageY},i.timeStamp=(new Date).getTime();var s=i.timeStamp-(this._lastEvent&&this._lastEvent.timeStamp)||0,n=Math.abs(i.pageX-this._lastEvent.pageX)>20||Math.abs(i.pageY-this._lastEvent.pageY)>20;return s<300&&0!=s&&!n&&this.toggle(this.startTouchEvent),this._lastEvent=i,!0},o=function(i){e.pos.cur=e.pos.last,e.parent.off("touchend touchcancel",t.proxy(o,e))};e.parent.on("touchstart",t.proxy(s,e))}else if("pinch"==this.options.activate.touch){this._scale=1,this._scaled=!1,this._cycle?(this.maxZoom=this.options.zoom[this._cycle.len-1],this._cycle=!1):this.maxZoom=this.options.zoom;var s=function(i){if(e.parent.on("touchcancel touchend",t.proxy(a,e)),i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]){if(1==i.originalEvent.touches.length){var s=e._getEvent(i);return e.pos.start={x:s.pageX,y:s.pageY},!0}if(2!=i.originalEvent.touches.length)return!0}return i.preventDefault(),i.stopPropagation(),this.startZoom=this.zoomBy,this.startPos=this.pos.last,this.pos.start=this._getPosition(i.originalEvent.touches),this.pinching=!0,this.hasPinchEnded=!1,this._scaled||(this.o=this._pinchZoomStart(i)),this._startDist=this._getDistance(i.originalEvent.touches),this._scale=this._lastScale||this._scale,this.parent.on("touchmove",t.proxy(n,this)),this.parent.on("touchcancel touchend",t.proxy(o,this)),!0},n=function(t){if(t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]&&2!=t.originalEvent.touches.length)return!0;var e=this._getDistance(t.originalEvent.touches),i=this._getPosition(t.originalEvent.touches),s=e/this._startDist;s=Math.max(1,Math.min(s*this._scale,this.maxZoom)),this._pinchZoom(t,s,i,this.o),this._lastScale=s,this._scaled=!0},a=function(i){e.pos.cur=e.pos.last,e.parent.off("touchcancel touchend",t.proxy(a,e))},o=function(i){i.originalEvent&&i.originalEvent.touches&&0==i.originalEvent.touches.length&&(e.hasPinchEnded=!0),e.parent.off("touchmove",t.proxy(n,this)),e.hasPinchEnded&&(1==this.zoomBy&&(this.zoomed=!1),e.pinching=!1,e.pos.cur=e.pos.last,e.parent.off("touchcancel touchend",t.proxy(o,this)))};e.parent.on("touchstart",t.proxy(s,e))}else"none"==this.options.activate.touch||i()}else{if("disable"==this.options.activate.mouse)return!1;if("over"==this.options.activate.mouse||"over-noclick"==this.options.activate.mouse){var r="mouseenter mousedown";"over-noclick"==this.options.activate.mouse&&(r="mouseenter"),e.parent.on(r,function(t){return"mouseenter"!=t.type||e.zoomed?"mousedown"==t.type?e.toggle(t):void 0:e.toggle(t)}),e.parent.on("mouseleave",function(t){return e.zoom(!1,t)})}else"down"==this.options.activate.mouse?(this.options.pan=!1,e.parent.on("mousedown",function(t){e.toggle(t)})):"none"==this.options.activate.mouse||i()}("created"==this.options.preload.zoomed||this.canTouch&&"pinch"==this.options.activate.touch||this._loadZoomedPromise)&&this.preload(),this._track("created")}},zoomed:!1,toggle:function(t,e){this._cycle?this.cycle(t,e):this.zoom(!this.zoomed,t)},cycle:function(e,i){this.animating||(this._cycle.current=void 0!==i?i:this._cycle.current+=1,this.options.zoom[this._cycle.current]?(this.map&&this.inner.off("mousemove touchmove",t.proxy(this._mapMove,this)),
this.parent.off("mousemove touchmove"),this.oldTarget=this.target[0]==this.imgs[this._cycle.current][0]?null:this.target,this.oldZoom=this.options.zoom[this._cycle.current],this.target=this.imgs[this._cycle.current],this.zoom(!0,e),this.pos.cur=this.pos.last):(this._cycle.current=-1,this.zoom(!1,e)))},zoom:function(i,s,o){if(i!=this.zoomed||this._cycle||o){this.zoomed=i;var n=this;if(i){if(this.box&&this.box.show(),!this._zoomLoaded)return void this._checkLoaded(s);this.init=!1,this.moveEvent=this.canTouch?"touchmove":"mousemove",this.zoomBy=this._cycle?this.options.zoom[this._cycle.current]||1:this.options.zoom;var a=this.overflow.width(),r=this.overflow.height(),h=a*this.zoomBy,c=r*this.zoomBy,l=this.parent.offset(),u=0,p=0,d=0,m=0,f=0;void 0===s&&(s={pageX:a/2,pageY:r/2}),this._track("startMove",{domEvent:s,zoom:this.zoomBy}),this.parent.removeClass(this.options.states.inactive).addClass(this.options.states.active),this.wrapper.css({width:h,height:c}),this[this.mark.name]&&(this.box&&(u=this.box.width(),p=this.box.height(),this.lens&&(f=this._makeLens(this.lens,u,p,this.zoomBy,{w:a,h:r}))),this.map&&(d=this.map.width(),m=d*(this.element.height()/this.element.width()),this.inner.height(m),this.inner.width(d),this.lens&&(f=this._makeLens(this.lens,d,m,this.zoomBy,{w:d,h:m})),this._mapEnd=function(e){n.mousedownForMap=!1,n.inner.off(n.canTouch?"touchmove":"mousemove",t.proxy(n._mapMove,n)),n.inner.off(n.canTouch?"touchend":"mouseup",t.proxy(n._mapEnd,n))},this._mapMove=function(t){n.mousedownForMap&&n._mouseMove(n._getEvent(t),a,r,h,c,n.map.offset(),u,p,d,m,f,!0)},this._mapStart=function(e){e.preventDefault(),e.stopPropagation(),n.mousedownForMap=!0,n._mouseMove(n._getEvent(e),a,r,h,c,n.map.offset(),u,p,d,m,f,!0),this.inner.on(n.canTouch?"touchmove":"mousemove",t.proxy(n._mapMove,n)),this.inner.on(n.canTouch?"touchend":"mouseup",t.proxy(n._mapEnd,n))},this.inner.on("mouseleave",t.proxy(n._mapEnd,n)),this.inner.on(n.canTouch?"touchstart":"mousedown",t.proxy(this._mapStart,n))),this[this.mark.name].show(),this[this.mark.inner].show(),this[this.mark.inner].removeClass(this.options.states.inactive).addClass(this.options.states.active)),this._parentMove=function(t){t.preventDefault(),t.stopPropagation(),n._mouseMove(n._getEvent(t),a,r,h,c,l,u,p,d,m,f)},this.parent.on(this.moveEvent,t.proxy(n._parentMove,n)),this._mouseMove(n._getEvent(s),a,r,h,c,l,u,p,d,m,f),this._setZoomCursor(n.lens?n.lens:n.parent),this.options.fade?(this.animating=!0,this.target.animate({opacity:1},{complete:function(){n.canHideEl&&n.element.css({opacity:1}),n.animating=!1,n.oldTarget&&n.oldTarget.css(e)}})):(this.target.css({opacity:1}),n.canHideEl&&this.element.css({opacity:1}),n.oldTarget&&n.oldTarget.css(e)),this.lens&&this.lens.show(),this._track("zoomedIn",{domEvent:s,zoom:this.zoomBy})}else this.init=!1,this._track("stopMove",{domEvent:s}),this.pos={start:{x:0,y:0},last:{x:0,y:0},cur:{x:0,y:0}},this.target.css(e),clearInterval(n.interval),this.options.fade&&this.target.stop(),this[this.mark.name]&&(this[this.mark.name].hide(),this[this.mark.inner].hide(),this[this.mark.inner].removeClass(this.options.states.active).addClass(this.options.states.inactive),this.map&&(this.inner.off("mouseleave",t.proxy(n._mapEnd,n)),this.inner.off(n.canTouch?"touchstart":"mousedown",t.proxy(this._mapStart,n)))),this.canHideEl&&this.element.css({opacity:1}),this._cycle&&(this._cycle.current=-1),this.lens&&this.lens.hide(),this.moveEvent&&t.proxy(this._parentMove,this)&&this.parent.off(this.moveEvent,t.proxy(this._parentMove,this)),this.wrapper.css({width:"",height:""}),this._setCursor(this.options.cursor.inactive,this.parent),this.parent.removeClass(this.options.states.active).addClass(this.options.states.inactive),this._track("zoomedOut",s)}},_getEvent:function(t){return t&&"touchend"==t.type&&(t=this.startTouchEvent),t&&t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]&&(t=t.originalEvent.touches[0]),t},load:function(t){this._loadImage()},visible:function(t){if(this._visible==t){if(t==this._zoomVisible)return;return void(t&&"visible"==this.options.preload.zoomed&&(this._loadZoomed(),this._zoomVisible=t))}t&&this._track("visible",{visible:t}),t?("visible"==this.options.preload.image&&this._loadImage(),"visible"==this.options.preload.zoomed&&(this._loadZoomed(),this._zoomVisible=t),this._calcSize()):this.zoom(!1),this._visible=t},preload:function(){this._loadZoomed()},_makeLens:function(t,e,i,s,o){var n={lw:e/s,lh:i/s,lwh:0,lhh:0,dl:0,dt:0};return t.width(n.lw),t.height(n.lh),n.dl=t.outerWidth(!0)-n.lw,n.dt=t.outerHeight(!0)-n.lh,n.lw+n.dl>o.w&&(n.lw=o.w-n.dl),n.lh+n.dt>o.h&&(n.lh=o.h-n.dt),t.width(n.lw),t.height(n.lh),n.lwh=n.lw/2,n.lhh=n.lh/2,n.dlh=n.dl/2,n.dth=n.dt/2,n},_loadZoomed:function(){if(!this._imageLoaded)return"none"!=this.options.preload.zoomed&&(this._loadZoomedPromise=!0),void this._loadImage();if(!this._zoomLoaded&&!this._zoomLoading){var e=this;this._zoomLoading=!0,this._zoomLoaded=!1,this._toLoadCount=this.imgs.length,this._zoomLoadedCount=0,this._track("startPreload");var i=function(t){++e._zoomLoadedCount==e._toLoadCount&&(e._zoomLoaded=!0,e._zoomLoading=!1,e.loading.hide(),e._track("preloaded"),e._calcSize())};t.each(this.imgs,function(t,s){s.on("load",i),s[0].src=e._getUrl(e.options.zoom[t])})}},_checkLoaded:function(t){var e=this,i=!1;this._zoomLoading||this._loadZoomed(),clearInterval(this.interval),this.interval=setInterval(function(){e._zoomLoaded?(clearInterval(e.interval),e.zoom(e.zoomed,t,!0)):e._zoomLoading&&!i&&(e.canHideEl&&e.element.css({opacity:0}),i=!0)},50)},_pinchZoomStart:function(e){var i=this;this.zoomed=!0,this.options.fade?this.target.animate({opacity:1}):this.target.css({opacity:1}),this.target.show();var s={pw:this.overflow.width(),ph:this.overflow.height(),po:this.parent.offset(),mw:0,mh:0,lens:null};return s.tw=1*s.pw,s.th=1*s.ph,this.wrapper.css({width:this.overflow.width(),height:this.overflow.height()}),this.map&&(s.mw=this.map.width(),s.mh=s.mw*(this.element.height()/this.element.width()),s.mo=this.map.offset(),this.inner.height(s.mh),this.map.show(),this.lens&&(s.lens=this._makeLens(this.lens,s.mw,s.mh,1,{w:s.mw,h:s.mh})),this._mapEnd=function(e){i.inner.off("touchmove",t.proxy(i._mapMove,i)),i.inner.off("touchend",t.proxy(i._mapEnd,i))},this._mapMove=function(t){t.preventDefault(),t.stopPropagation(),i._mouseMove(i._getEvent(t),s.pw,s.ph,s.tw,s.th,i.map.offset(),null,null,s.mw,s.mh,s.lens,!0)},this._mapStart=function(e){e.preventDefault(),e.stopPropagation(),i._mouseMove(i._getEvent(e),s.pw,s.ph,s.tw,s.th,i.map.offset(),null,null,s.mw,s.mh,s.lens,!0),this.inner.on("touchmove",t.proxy(i._mapMove,i)),this.inner.on("touchend",t.proxy(i._mapEnd,i))},this.inner.on("touchstart",t.proxy(this._mapStart,this)),this.inner.removeClass(this.options.states.inactive).addClass(this.options.states.active),this.inner.show(),this.lens&&this.lens.show()),this._parentMove=function(t){return i.hasPinchEnded?!!(t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]&&1!=t.originalEvent.touches.length)||(t.preventDefault(),1!==this.zoomBy&&t.stopPropagation(),void i._mouseMove(i._getEvent(t),s.pw,s.ph,s.tw,s.th,s.po,null,null,s.mw,s.mh,s.lens)):(t.stopPropagation(),!0)},this.parent.on("touchmove",t.proxy(this._parentMove,this)),s},_pinchZoom:function(t,e,i,s){e==this.maxZoom?this._track("maxZoom",{domEvent:t,scale:e,center:i}):1==e&&this._track("minZoom",{domEvent:t,scale:e,center:i}),s.tw=s.pw*e,s.th=s.ph*e,this.zoomBy=e,this.wrapper.css({width:s.tw,height:s.th}),this.lens&&(s.lens=this._makeLens(this.lens,s.mw,s.mh,e,{w:s.mw,h:s.mh})),this._mouseMove({currentTarget:t.currentTarget,pageX:i.x,pageY:i.y},s.pw,s.ph,s.tw,s.th,s.po,null,null,s.mw,s.mh,s.lens)},_mouseMove:function(t,e,i,s,o,n,a,r,h,c,l,u){var p,d,m,f,v,g=a?s-e+(e-a):s-e,_=r?o-i+(i-r):o-i;if(this.init&&this.options.pan){if(!(this.mousedown||this.canTouch||u))return void(this.panning=!1);if(this.pinching)p=(this.startPos.x+(this.pos.start.x-n.left))/this.startZoom,d=(this.startPos.y+(this.pos.start.y-n.top))/this.startZoom,m=g*(p/e),f=_*(d/i);else{this.panning=!0;var y=this.pos.start.x-t.pageX,w=this.pos.start.y-t.pageY;m=y+this.pos.cur.x,f=w+this.pos.cur.y,p=(m+e/2)/(s/e),d=(f+i/2)/(o/i)}}else this.init=!0,this.panning=!1,p=t.pageX-n.left,d=t.pageY-n.top,m=g*(p/e),f=_*(d/i),this.pos.cur.x=this.pos.last.x||m,this.pos.cur.y=this.pos.last.y||f;if(this.lens){if(this.box){this.box[0].lastChild.relatedUUID!=this.uuid&&(this.box.append(this.wrapper),this.wrapper.show().siblings().hide());var x=e,b=i,z=p-l.lwh-l.dlh,S=d-l.lhh-l.dth;m=(z+l.dlh)*this.zoomBy-l.lw/e,f=(S+l.dth)*this.zoomBy-l.lh/i,v=this._setBounds(p,d,e,i,0,0),p=v.x,d=v.y}else if(u){this.panning&&(p=t.pageX-n.left,d=t.pageY-n.top);var x=h,b=c,z=p-l.lwh-l.dlh,S=d-l.lhh-l.dth;m=((z+l.dlh)*this.zoomBy-l.lw/e)*e/h,f=((S+l.dth)*this.zoomBy-l.lh/i)*i/c,this.pos.cur={x:m,y:f}}else if(this.map){if(this.map[0].lastChild.relatedUUID!=this.uuid&&(this.map.append(this.inner),this.inner.show().siblings().hide()),this.panning){var z=p/(e/h)-l.lwh-l.dth;S=d/(i/c)-l.lhh-l.dth}else var C=p/(e/l.lw),E=d/(i/l.lh),z=p/(e/h)-C-l.dlh,S=d/(i/c)-E-l.dth;v=this._setBounds(z,S,h-l.lw-l.dl,c-l.lh-l.dt,0,0),z=v.x,S=v.y}(this.box||u)&&(p+l.lwh+l.dlh>=x&&(z=x-l.lw-l.dl),d+l.lhh+l.dth>=b&&(S=b-l.lh-l.dt),p-l.lwh-l.dlh<=0&&(z=0),d-l.lhh-l.dth<=0&&(S=0)),this.lens.css({top:S+"px",left:z+"px"})}v=this._setBounds(m,f,g,_,0,0),m=v.x,f=v.y,this.pos.last={x:m,y:f},this.lastPos={x:m,y:f},this.oldTarget&&this.oldTarget.css({top:-f+"px",left:-m+"px"}),this.target.css({top:-f+"px",left:-m+"px"}),this._track("move",{domEvent:t,pos:{x:p/e,y:d/i}})},_calcSize:function(){var t,e;if(this.options.responsive&&this.options.width&&this.options.height&&"auto"!=this.options.width&&"auto"!=this.options.height?(t=this.element.width(),e=t*(this.options.height/this.options.width),this.parent.height(e),this.overflow.height(e),0!=this.element.height()&&e>this.element.height()&&this.overflow.height(this.element.height())):(this.options.width&&this.parent.width(this.options.width),this.options.height&&this.parent.height(this.options.height)),this.map){var i=this.map.width(),s=i*(this.element.height()/this.element.width());this.inner.height(s)}},_getUrl:function(e){if(this.options.url)return this.options.url;var i=this.element.attr("src")||this.element.attr("data-amp-src");if(i){var s=this._cycle?e||1:this.options.zoom;i=this._cleanUrl(i);var o=this.options.transforms;if(this._cycle){o=o[t.inArray(e,this.options.zoom)]}return i=o?this._setTransforms(i,o):i,i=this._setWidth(i,{h:this._originalImage.height*s,w:this._originalImage.width*s})}},_getWidth:function(t){if(window.amp&&amp.di)return amp.di.width(t);var t=t.split("?");if(!t[1])return!1;for(var e=t[1].split("&"),i=0;i<e.length;i++){var s=e[i].split("=");if("w"==s[0])return parseInt(s[1])}return!1},_setWidth:function(e,i){if(window.amp&&amp.di)return amp.di.set(e,i);var e=e.split("?");if(e[1]){for(var s=e[1].split("&"),o=[],n=0;n<s.length;n++){var a=s[n].split("="),r={};"w"!=a[0]&&(r[a[0]]=a[1],o.push(t.param(r)))}return o=o.concat(t.param(i)),e[0]+"?"+o.join("&")}return e[0]+"?"+t.param(i)},_cleanUrl:function(t){return t.split("?")[0]},_loadImage:function(){if(!this._imageLoaded&&!this._imageLoading){this.loading=t('<div class="amp-loading"></div>'),this._imageLoading=!0;var e=this.element[0].src||this.element.attr("data-amp-src");this.element.on("load",t.proxy(this._onImageLoad,this)),this.element[0].src="",this.element[0].src=e}},_getNaturalSize:function(t){return{width:this.element[0].naturalWidth,height:this.element[0].naturalHeight}},_setTransforms:function(t,e){return t.indexOf("?")==-1?t+"?"+e:t+"&"+e},_setBounds:function(t,e,i,s,o,n){return t>=i&&(t=i),e>=s&&(e=s),t<=o&&(t=o),e<=n&&(e=n),{x:t,y:e}},_track:function(t,e){this._trigger(t,null,e),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"zoom",t,e)},_setCursor:function(t,e){return"string"!=typeof t&&(t="auto"),t.indexOf("zoom")<0?(e.css("cursor",t),!1):!document.documentMode&&("undefined"!=typeof InstallTrigger&&e.css("cursor","-moz-"+t),void(window.chrome&&e.css("cursor","-webkit-"+t)))},_setZoomCursor:function(t){var e=this.options.zoom;if(e.length){e.indexOf(this.zoomBy)===e.length-1?this._setCursor(this.options.cursor.active,t):this._setCursor(this.options.cursor.inactive,t)}else this.zoomBy>1?this._setCursor(this.options.cursor.active,t):this._setCursor(this.options.cursor.inactive,t)},_getDistance:function(t){var e=Math.abs(t[0].pageX-t[1].pageX),i=Math.abs(t[0].pageY-t[1].pageY);return Math.sqrt(e*e+i*i)},_getPosition:function(t){return{x:(t[0].pageX+t[1].pageX)/2,y:(t[0].pageY+t[1].pageY)/2}},_destroy:function(){this.element.unwrap().unwrap(),this.wrapper.remove(),this.element.removeClass("amp"),this.element.removeClass("amp-zoom"),this.element.removeClass(this.options.states.active),this.element.removeClass(this.options.states.inactive),this.element.css({cursor:"",height:"","max-width":"",width:"",opacity:"",position:"",display:"",top:"",left:"",zoom:""}),this._removeEmptyAttributeHelper(this.element)},_removeEmptyAttributeHelper:function(t,e){for(var i=e||["class","style"],s=0,o=i.length;s<o;s++)t.attr(i[s])&&t.prop(i[s])||t.removeAttr(i[s])}})}(jQuery),function(t){t.widget("amp.ampZoomInline",{options:{scaleMax:3,scaleStep:.5,scaleSteps:!1,events:{zoomIn:"mouseup touchstart",zoomOut:"mouseup touchend",move:"mousemove touchmove"},stopPropagation:"",activation:{inGesture:!0},pinch:!1,transforms:"",preload:"none",pan:!1},_getCreateOptions:function(){var e=this.element.data().ampZoomInline;return e?t.extend(!0,{},this.options,e):this.options},_create:function(){this.scale=1,this.element.addClass("amp amp-zoom"),this.$parent=this.element.parent(),this._invalidateParentSize(),this.element.on(this.options.events.zoomIn,t.proxy(this.zoomIn,this)),this.options.activation.inGesture||(this.gestureDetect=new e(this.element)),this._track("created"),"created"==this.options.preload&&this.load(),this.options.pan&&(t(document).on("dragstart",function(){return!1}),this.element.parent().on("mousedown touchstart",t.proxy(function(e){return this.scale>1&&e.stopPropagation(),this.panner&&(this.panner.remove(),delete this.panner),this.scale>1&&(this.panner=new s(this,e,t.proxy(function(t,e){this.zoomArea&&this.zoomArea.setPosition(t,e)},this))),!0},this))),this.options.pinch&&this.element.parent().on("touchstart",t.proxy(function(e){return this.pincher&&(this.pincher.remove(),delete this.pincher),this.pincher=new i(e,t.proxy(function(){this.zoomIn()},this),t.proxy(function(){this.zoomOut()},this)),!0},this)),""!==this.options.stopPropagation&&this.element.parent().on(this.options.stopPropagation,t.proxy(function(t){1!=this.scale&&t.stopPropagation()},this))},visible:function(t){this._visible!=t&&(t&&this._track("visible",{visible:t}),t?"visible"==this.options.preload&&this.load():this.zoomOutFull(),this._visible=t)},load:function(){this._setupZoomArea().then(t.proxy(function(t){t.setScale(this.options.zoom)},this))},_setupZoomArea:function(){return new Promise(t.proxy(function(e,i){this.zoomArea?e(this.zoomArea):this.getImageSize().then(t.proxy(function(t){t.error?i(!1):(this.zoomArea=new o(this.element,this.$parent,t,this.options.transforms),e(this.zoomArea))},this))},this))},getImageSize:function(){return new Promise(t.proxy(function(e,i){this.element[0].naturalWidth&&this.element[0].naturalHeight?e({x:this.element[0].naturalWidth,y:this.element[0].naturalHeight}):this.element[0].width&&this.element[0].height&&e({x:this.element[0].width,y:this.element[0].height}),this.element.on("load",t.proxy(function(){this.element[0].naturalWidth&&this.element[0].naturalHeight?e({x:this.element[0].naturalWidth,y:this.element[0].naturalHeight}):this.element[0].width&&this.element[0].height&&e({x:this.element[0].width,y:this.element[0].height})},this)),this.element.on("error",t.proxy(function(){i({error:!0})},this))},this))},_invalidateParentSize:function(){this.parentSize={x:this.$parent.width(),y:this.$parent.height()}},state:function(){return{scale:this.scale,scaleMax:this.options.scaleMax,scaleStep:this.options.scaleStep}},zoomInFull:function(t){this.setScale(this.options.scaleMax),this._track("zoomedInFull",{domEvent:t,scale:this.options.scaleMax,scaleMax:this.options.scaleMax,scaleStep:this.options.scaleStep})},zoomIn:function(e){if((this.options.scaleSteps||1==this.scale)&&(e&&e.preventDefault(),this.options.activation.inGesture||!this.gestureDetect.detected)){var i=this.scale;this.options.scaleSteps?(this.scale+=this.options.scaleStep,this.scale=Math.min(this.scale,this.options.scaleMax)):this.scale=this.options.scaleMax,i!=this.scale&&(this._track("zoomedIn",{domEvent:e,scale:this.scale,scaleMax:this.options.scaleMax,scaleStep:this.options.scaleStep}),this.setScale(this.scale),setTimeout(t.proxy(function(){t(document).on(this.options.events.move,t.proxy(this._setPos,this)),this.options.scaleSteps||t(document).on(this.options.events.zoomOut,t.proxy(this.zoomOut,this))},this),1))}},zoomInClick:function(e){if(this.options.activation.inGesture||!this.gestureDetect.detected){var i=this.scale;this.scale+=this.options.scaleStep,this.scale=Math.min(this.scale,this.options.scaleMax),i!=this.scale&&(this._track("zoomedIn",{domEvent:e,scale:this.scale,scaleMax:this.options.scaleMax,scaleStep:this.options.scaleStep}),this.setScale(this.scale),setTimeout(t.proxy(function(){t(document).on(this.options.events.move,t.proxy(this._setPos,this))},this),1))}},setScale:function(e){this.scale=e,this._setupZoomArea().then(t.proxy(function(t){t&&(t.setScale(this.scale),this._invalidateParentSize())},this))},_setPos:function(t){this._track("settingPos",{domEvent:t});var e=t?this._getPercentagePos(t):{x:.5,y:.5};this.zoomArea.setPosition(e.x,e.y)},zoomOut:function(e){var i=this.scale;this.options.scaleSteps?(this.scale-=this.options.scaleStep,this.scale=Math.max(this.scale,1)):this.scale=1,i!=this.scale&&(1==this.scale&&(this.options.events.move&&t(document).off(this.options.events.move,this._setPos),this.options.events.zoomOut&&t(document).off(this.options.events.zoomOut,this.zoomOut)),this.zoomArea.$preloader&&this.zoomArea.$preloader.addClass("amp-hidden"),this.zoomArea.setScale(this.scale),this._track("zoomedOut",{domEvent:e,scale:this.scale,scaleMax:this.options.scaleMax,scaleStep:this.options.scaleStep}))},zoomOutFull:function(e){this.zoomArea&&(this.options.events.move&&t(document).off(this.options.events.move,this._setPos),this.options.events.zoomOut&&t(document).off(this.options.events.zoomOut,this.zoomOut),this.scale=1,this.zoomArea.$preloader&&this.zoomArea.$preloader.addClass("amp-hidden"),this.zoomArea.setScale(1),this._track("zoomedOutFull",{domEvent:e,scale:this.scale,scaleMax:this.options.scaleMax,scaleStep:this.options.scaleStep}))},_convertEvent:function(t){return t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]&&(t.preventDefault(),t=t.originalEvent.touches[0]),t},_getPercentagePos:function(t){t=this._convertEvent(t);var e=this.$parent.offset();return{x:(t.pageX-e.left)/this.parentSize.x,y:(t.pageY-e.top)/this.parentSize.y}},_track:function(t,e){this._trigger(t,null,e),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"zoom",t,e)},_destroy:function(){this.element.removeClass("amp"),this.element.removeClass("amp-zoom"),this._removeEmptyAttributeHelper(this.element)},_removeEmptyAttributeHelper:function(t,e){for(var i=e||["class","style"],s=0,o=i.length;s<o;s++)t.attr(i[s])&&t.prop(i[s])||t.removeAttr(i[s])}});var e=function(e,i){this.toleranceX=void 0!==e?e:0,this.toleranceY=void 0!==i?i:0,this.detected=!1,this.$document=t("body"),this.$document.on("mousedown touchstart",t.proxy(this.startDetecting,this))};e.prototype.convertEvent=function(t){return t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]&&(t=t.originalEvent.touches[0]),t},e.prototype.startDetecting=function(e){this.detected=!1,this.$document.on("mousemove touchmove",t.proxy(this.moveDetected,this)),this.$document.on("mouseup touchend",t.proxy(this.stopDetecting,this))},e.prototype.moveDetected=function(t){this.detected=!0},e.prototype.stopDetecting=function(t){this.$document.off("mousemove touchmove",this.moveDetected),this.$document.off("mouseup touchend",this.stopDetecting)};var i=function(e,i,s){this.threshold=100,e=this.getFingers(e),this.cbIn=i,this.cbOut=s,2==e.length&&(this.start=this.getDistance(e),t(document).on("touchmove",t.proxy(this.move,this)),t(document).on("touchend",t.proxy(this.end,this)))};i.prototype.getDistance=function(t){var e=Math.abs(t[0].pageX-t[1].pageX),i=Math.abs(t[0].pageY-t[1].pageY);return Math.sqrt(e*e+i*i)},i.prototype.move=function(t){t.preventDefault(),t=this.getFingers(t);var e=this.getDistance(t),i=e-this.start;i>this.threshold&&(this.cbIn(),this.start=e),i<0-this.threshold&&(this.cbOut(),this.start=e)},i.prototype.remove=function(){this.end()},i.prototype.end=function(e){t(document).off("mousemove touchmove",this.move),t(document).off("mouseup touchend",this.end)},i.prototype.getFingers=function(t){return t.originalEvent&&t.originalEvent.touches&&(t=t.originalEvent.touches),t};var s=function(e,i,s){this.multiFinger(i)||(i=this.convertEvent(i),this.start={x:i.pageX,y:i.pageY},this.zoomArea=e.zoomArea,this.cb=s,this.element=e.element,this.currentPixPos=this.zoomArea.getPixPos(),t(document).on("mousemove touchmove",t.proxy(this.move,this)),t(document).on("mouseup touchend",t.proxy(this.end,this)))};s.prototype.move=function(t){t.preventDefault(),t=this.convertEvent(t);var e=t.pageX-this.start.x,i=t.pageY-this.start.y,s=this.zoomArea.getPercentFromPos(this.currentPixPos.x+e,this.currentPixPos.y+i);this.cb(s.x,s.y)},s.prototype.end=function(e){t(document).off("mousemove touchmove",this.move),t(document).off("mouseup touchend",this.end)},s.prototype.remove=function(){this.end()},s.prototype.multiFinger=function(t){return t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches.length>1},s.prototype.convertEvent=function(t){return t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]&&(t=t.originalEvent.touches[0]),t};var o=function(t,e,i,s){this.animating=!1,this.transforms=s,this.initialSrc=t.attr("src"),this.scale=1,this.$area=e,this.$source=t,this.originalSize=i,this.posPercentageX=.5,this.posPercentageY=.5,this.createContainer(),this.hide()};o.prototype.getPercentagePosWithScale=function(t){},o.prototype.createContainer=function(){var e=this;this.$container=t('<div class="amp-zoomed-container"></div>'),this.$preloader=t('<img class="amp-zoomed-clone amp-hidden">'),this.$preloader.on("load",function(){e._preloaderImgLoaded=!0}),this.$zoomed=t('<img class="amp-zoomed" style="z-index:2;" src=""/>'),this.$container.append(this.$zoomed),this.$container.append(this.$preloader),this.$area.append(this.$container),this.$container.css({position:"absolute",top:0,left:0,bottom:0,right:0})},o.prototype.invalidatePosition=function(){this.setPosition(this.posPercentageX,this.posPercentageY)},o.prototype.setPosition=function(t,e){this.animating||(this.$preloader.addClass("amp-hidden"),this.$zoomed.width()<=this.$area.width()&&(t=.5),this.$zoomed.height()<=this.$area.height()&&(e=.5),this.posPercentageX=t,this.posPercentageY=e,t=Math.min(1,Math.max(0,t)),e=Math.min(1,Math.max(0,e)),this.$zoomed.css("left",0-(this.$zoomed.width()-this.$area.width())*t+"px"),this.$zoomed.css("top",0-(this.$zoomed.height()-this.$area.height())*e+"px"))},o.prototype.getPixPos=function(t,e){return void 0==t&&void 0==e&&(t=this.posPercentageX,e=this.posPercentageY),t=Math.min(1,Math.max(0,t)),e=Math.min(1,Math.max(0,e)),{x:0-(this.newSize.x-this.$area.width())*t,y:0-(this.newSize.y-this.$area.height())*e}},o.prototype.getPercentFromPos=function(t,e){return{x:0-t/(this.newSize.x-this.$area.width()),y:0-e/(this.newSize.y-this.$area.height())}},o.prototype.animate=function(e,i,s){this.animating=!0,e.x<=this.$area.width()&&(i.x=this.getPixPos(.5,.5).x),e.y<=this.$area.height()&&(i.y=this.getPixPos(.5,.5).y),this.$zoomed.animate({width:e.x,height:e.y,left:i.x+"px",top:i.y+"px"},500,t.proxy(function(){this.animating=!1,s&&s()},this))},o.prototype.updateImageSrc=function(e){var i=this,s=0;if(this.preloadedImgInterval&&clearInterval(this.preloadedImgInterval),!e)return i.$preloader.addClass("amp-hidden"),!1;this.preloadedImgInterval=setInterval(function(){if((s+=1)>=30)return clearInterval(i.preloadedImgInterval),!1;if(1!=!i._preloaderImgLoaded){var e=i.$zoomed.prop("attributes");t.each(e,function(){"src"!=this.name&&"class"!=this.name&&i.$preloader.attr(this.name,this.value)}),i.$preloader.removeClass("amp-hidden"),i.setImage(),clearInterval(i.preloadedImgInterval)}},200)},o.prototype.setScale=function(t,e){var i=this,s=t>this.scale;t!=this.scale&&(t<this.scale&&1==t?this.newSize={x:this.$source.width(),y:this.$source.height()}:this.newSize={x:this.$source.width()*t,y:this.$source.height()*t},1==this.scale&&(this.$zoomed.attr("src",this.$source.attr("src")),t>this.scale&&(this.$zoomed.width(this.$source.width()),this.$zoomed.height(this.$source.height())),this.setPosition(.5,.5),this.show()),1==t?this.animate(this.newSize,this.getPixPos(),function(){i.hide(),i.updateImageSrc(!1)}):this.animate(this.newSize,this.getPixPos(),function(){i.updateImageSrc(s)}),this.scale=t,this.invalidateImageURL({x:this.originalSize.x*t,y:this.originalSize.y*t}))},o.prototype.show=function(){this.invalidatePosition(),t(window).off("resize",this.invalidatePosition),t(window).on("resize",t.proxy(this.invalidatePosition,this)),this.$container.show()},o.prototype.hide=function(){this.$container.hide(),t(window).off("resize",this.invalidatePosition)},o.prototype.invalidateImageURL=function(t){var e="";this.transforms&&this.transforms.length&&(e=this.transforms+"&");var i=this.initialSrc.split("?")[0]+"?"+e+"w="+t.x+"&h="+t.y;0!=t.x&&0!=t.y||(i=""),this._preloaderImgLoaded=!1,this.$preloader.attr("src",i)},o.prototype.setImage=function(){this.$zoomed.attr("src",this.$preloader.attr("src"))}}(jQuery),function(t){t.widget("amp.ampVideo",{options:{autoplay:!1,loop:!1,muted:!1,skin:"amp-video-skin",responsive:!0,preload:"auto",pauseOnHide:!0,controls:!0,nativeControlsForTouch:!0,plugins:{},enableSoftStates:!0},_states:{stopped:0,buffering:1,paused:2,playing:3,loading:4,error:5,idle:6},_currentState:0,_ready:!1,_loopCount:0,_savedHTML:"",_getCreateOptions:function(){this._savedHTML=this.element[0].outerHTML;var e=this.element.data().ampVideo;return e?t.extend(!0,{},this.options,e):this.options},_create:function(){this.element.addClass("amp amp-video");var e=this.element.find("video"),i=this;e.addClass("video-js "+this.options.skin),videojs&&(videojs.options.flash.swf=this.options.swfUrl+"video-js.swf"||"../../assets/video-js.swf",this._player=videojs(e[0],{autoplay:this.options.autoplay,muted:this.options.muted,width:"100%",height:"100%",loop:!1,controls:this.options.controls,preload:this.options.preload,plugins:i._sanitisePlugins(this.options.plugins),nativeControlsForTouch:this.options.nativeControlsForTouch})),i._calcSize(),i.options.responsive&&t(window).bind("resize",function(t){return function(){return t._calcSize()}}(i)),this._player.ready(function(){i._ready=!0;var e=i.element.find(".vjs-tech"),s=setInterval(function(){if("auto"==i.options.height){var t=e.css({height:"auto"}).height();0!=t&&(clearInterval(s),i.element.height(t),e.css({height:""}),i._player.dimensions(i.element.width(),i.element.height()))}},200);i.options.autoplay&&i.state(i._states.playing),this.on("play",function(t){i.softPlay&&i.options.enableSoftStates?i.softPlay=!1:(i.state(i._states.playing),i._track("play",{event:t,player:this,time:this.currentTime(),duration:i.duration}))}),this.on("error",function(t){i.state(i._states.error),i._track("error",null)}),this.on("pause",function(t){t.target.ended||t.target.seeking||(i.state(i._states.paused),i._track("pause",{event:t,player:this,time:this.currentTime(),duration:i.duration}))}),this.on("waiting",function(t){i.state(i._states.buffering)}),this.on("seeking",function(t){i.softSeek?i.softSeek=!1:(i.state()!==i._states.paused&&0!==t.target.currentTime&&i.options.enableSoftStates&&(i.softPlay=!0),i._track("seeked",{event:t,player:this,time:this.currentTime(),duration:i.duration}))}),this.on("timeupdate",function(t){i._track("timeUpdate",{event:t,player:this,time:this.currentTime(),duration:i.duration})}),this.on("volumechange",function(t){i._track("volume",{event:t,player:this,volume:this.volume(),muted:this.muted()})}),this.on("durationchange",function(t){i.duration=this.duration(),i._track("durationChange",{event:t,player:this,duration:i.duration})}),this.on("fullscreenchange",function(e){i._track("fullScreenChange",{event:e,player:this}),setTimeout(function(){t(window).resize()},200)}),this.on("ended",function(t){i.options.loop?(i.softSeek=!0,i._player.currentTime(0),i.softPlay=!0,i._player.play(),i._track("looped",{count:++i._loopCount})):(i.state(i._states.stopped),i._track("ended",null))}),i._track("created",{player:this,duration:i.duration})})},visible:function(t){t!=this._visible&&(t?(this._track("visible",{visible:t}),this._calcSize()):this._states.playing!=this.state()&&this._states.buffering!=this.state()||this.options.pauseOnHide&&this.pause(),this._visible=t)},redraw:function(){this._calcSize()},_calcSize:function(){var t,e;if(this.options.responsive&&this.options.width&&this.options.height&&"auto"!=this.options.width&&"auto"!=this.options.height){var i=this.element.css("display");this.element.css("display","block"),t=Math.round(this.element.width()),this.element.css("display",i),e=Math.round(t*(this.options.height/this.options.width)),this.element.height(e)}else this.options.width?this.element.width(this.options.width):this.options.responsive&&this.element.width(this.element.parent().width()),this.options.height?this.element.height(this.options.height):this.options.responsive&&this.element.height(this.element.parent().height());if(this.options.center){var s=this.element.height(),o=this.element.parent().height();this.element.css("margin-top",o/2-s/2+"px")}this._player&&this._player.dimensions(this.element.width(),this.element.height())},play:function(){this._ready&&this._states.playing!==this.state()&&this._player.play()},pause:function(){this._ready&&this._states.paused!==this.state()&&this._player.pause()},stop:function(){this._ready&&this._states.stopped!==this.state()&&(this._player.pause(),this.softSeek=!0,this._player.currentTime(0),this._track("stopped",null),this.state(this._states.stopped))},seek:function(t){this._ready&&this.currentTime(t)},currentTime:function(t){if(void 0===t)return this._player.currentTime();this._player.currentTime(t)},state:function(t){if(void 0===t)return this._currentState;this._currentState=t,this._trigger("stateChange",null,{state:t})},_track:function(t,e){this._trigger(t,null,e),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"video",t,e)},_destroy:function(){this._player.dispose(),this._player=null,this.element[0].outerHTML=this._savedHTML},_sanitisePlugins:function(t){return t&&0==t.resolutions&&delete t.resolutions,t}})}(jQuery),function(t){t.widget("amp.ampSpin",t.amp.ampStack,{options:{delay:50,autoplay:!1,loop:!0,responsive:!0,states:{selected:"amp-selected",seen:"amp-seen",active:"amp-active",inactive:"amp-inactive"},events:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},momentum:!0,preload:"created",preloadType:"full",minDistance:25,activate:"down",friction:.97,dir:"normal",gesture:{enabled:!0,fingers:1},orientation:"horz",start:1,cursor:{active:"auto",inactive:"auto"},play:{onLoad:!1,onVisible:!1,repeat:1},dragDistance:200,lazyLoad:!1},_getCreateOptions:function(){var e=this.element.data().ampSpin;return e?t.extend(!0,{},this.options,e):this.options},_create:function(){var e=this,i=this._children=this.element.children();this._count=this.element.children().length;this.isIE=navigator.userAgent.indexOf("MSIE")!==-1||navigator.appVersion.indexOf("Trident/")>0,
this.$document=t(document),this.options.friction=Math.min(this.options.friction,.999),this.options.friction=Math.max(this.options.friction,0),this._setCursor(this.options.cursor.inactive),this.count=this.element.children().length,this.options.dragDistance=Math.max(this.options.dragDistance,1),this._index=Math.max(1,Math.min(this.options.start,this.count)),t.inArray(this.options.preload,["created","visible","none"])==-1&&(this.options.preload="created"),this.element.addClass("amp"),this.element.addClass("amp-spin"),this.element.addClass(this.options.states.inactive),this.imgs=this.element.find("img:not(.amp-zoom-img)"),this.toLoadCount=this.imgs.length,this.loadedCount=0,i.addClass("amp-frame"),this.isIE?(i.css({"z-index":-1}),i.eq(this._index-1).css("z-index",1)):(i.css({display:"none"}),i.eq(this._index-1).css("display","block")),i.eq(this._index-1).addClass(this.options.states.selected+" "+this.options.states.seen),setTimeout(function(t){return function(){return t._calcSize()}}(e),1),this.options.responsive&&t(window).on("resize",function(t){return function(){return t._calcSize()}}(e)),this.element.on("dragstart",function(t){return!1}),this.element.on(this.options.events.start,t.proxy(this._startDrag,this)),this.element.on("mousewheel DOMMouseScroll",function(t){return e._mouseScroll(t)}),this.options.autoplay&&this.play(),"created"==this.options.preload&&this._startPreload(),this._track("created",{index:this._index,canNext:this.canNext(),canPrev:this.canPrev()})},_setCursor:function(t){return t.indexOf("zoom")<0&&t.indexOf("grab")<0?(this.element.css("cursor",t),!1):!document.documentMode&&("undefined"!=typeof InstallTrigger&&this.element.css("cursor","-moz-"+t),void(window.chrome&&this.element.css("cursor","-webkit-"+t)))},redraw:function(){this._calcSize()},_mouseScroll:function(t){var e=0;return t||(t=window.event),t.originalEvent.wheelDelta?e=t.originalEvent.wheelDelta:t.originalEvent.detail&&(e=-t.originalEvent.detail),e>0?this.next():this.prev(),this._track("scroll",{domEvent:t,delta:e}),t.preventDefault(),!1},visible:function(t){t!=this._visible&&(this._super(t),t&&("visible"==this.options.preload&&this._startPreload(),"none"==this.options.preload&&this._startPreload(this._index),this.options.play.onVisible&&this._loaded&&this.playRepeat(this.options.play.repeat)))},_resolveEventCoords:function(t){return t=t.originalEvent,t.touches&&t.touches.length?{x:t.touches[0].clientX,y:t.touches[0].clientY}:t.changedTouches&&t.changedTouches.length?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:{x:t.clientX,y:t.clientY}},_startPreload:function(e){if(!(this._loaded||this._loading&&!this.first)){var i=this;this._loading=!0,this.first||(this._track("startPreload"),"none"!=this.options.preload&&("full"==this.options.preloadType?(this.pre=t('<li class="amp-progress amp-frame"></li>'),this.element.append(this.pre)):"window"==this.options.preloadType&&(this.progressIndicator=t('<div class="amp-progress-indicator"><div class="amp-progress-message"></div><div class="amp-progress-bar-background"><div class="amp-progress-bar"></div></div></div>'),this.progressIndicator.find(".amp-progress-message").html(this.options.progressMessage||"Loading..."),this.progressIndicator.progress=i.progressIndicator.find(".amp-progress-bar"),this.progressIndicator.visible=!0,this.element.append(this.progressIndicator))));var s=function(t){if(++i.loadedCount>=i.toLoadCount&&!i._loaded)i._unsetLoadEvents(i.imgs),i._loaded=!0,i.pre&&i.pre.remove(),i.options.play.onLoad&&i.playRepeat(i.options.play.repeat),i._loading=!1,i.progressIndicator&&(i.progressIndicator.visible=!1,i.progressIndicator.remove()),i._track("preloaded");else{var e=i.loadedCount/i.toLoadCount*100;i.pre&&(i.pre.css("width",100-e+"%"),i.pre.css("left",e+"%")),i.progressIndicator&&i.progressIndicator.visible&&i.progressIndicator.progress.css("width",e+"%")}};e?(this.first=!0,this.toLoadCount-=1,this._callImageMethod(t(this.imgs[e-1]),s)):this._callImageMethod(this.imgs,s)}},_unsetLoadEvents:function(e){if(e)for(var i=0,s=e.length;i<s;i++){var o=t(e[i]),n=o.data();n["amp-ampZoom"]?o.ampZoom({loaded:null}):o.ampImage({loaded:null})}},_callImageMethod:function(e,i){for(var s=0,o=e.length;s<o;s++){var n=t(e[s]);n.data()["amp-ampZoom"]?(n.ampZoom({loaded:i}),n.ampZoom("load",this.options.preload)):(n.ampImage({loaded:i}),n.ampImage("load",this.options.preload))}},preload:function(){this._startPreload()},playRepeat:function(t){if("inf"==t)return void this.play();for(var e=this,i=0;i<t;i++)for(var s=0;s<this.count;s++)setTimeout(function(){e.next()},this.options.delay*(i*this.count+s))},_startDrag:function(e){var i=this,s=this._resolveEventCoords(e),o=t(e.currentTarget).offset(),n=s.x-o.left,a=s.y-o.top;if(!this._started){if(this.options.gesture.enabled&&e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0]&&e.originalEvent.touches.length!=this.options.gesture.fingers)return!0;this._started=!0,this._track("startMove",{domEvent:e,pos:{x:n,y:a}}),this._ended=!1,this.pause(),this._setCursor(this.options.cursor.active),this.element.removeClass(this.options.states.inactive).addClass(this.options.states.active);var r=this._mbind=function(t){return function(e){return i._mouseMove(e,o,n,a,t)}}(this._index),h=this._ubind=function(t){return function(e){return i._endDrag(e,o,n,a,t)}}(this._index);if(this.$document.on(this.options.events.move,r),this.$document.on(this.options.events.end,h),this._mouseMoveInfo=[{e:e,o:o,mx:n,my:a,sindex:this._index}],window.navigator.userAgent.indexOf("MSIE ")>0)return!1;this.element.find(".amp-spin").each(function(i,s){var o=t(s).data().ampAmpSpin;o&&o._startDrag&&o._startDrag(e)})}},_mouseMove:function(t,e,i,s,o){if(this.options.gesture.enabled&&t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]&&t.originalEvent.touches.length!=this.options.gesture.fingers)return!0;var n=this._resolveEventCoords(t),a=n.x-e.left,r=n.y-e.top,h=a-i,c=r-s,l=(this._mouseMoveInfo,{e:t,mx:a,my:r});return this.moveDir||(Math.abs(h)<Math.abs(c)?this.moveDir="vert":Math.abs(h)>Math.abs(c)?this.moveDir="horz":this.moveDir=this.options.orientation),this.options.orientation!=this.moveDir||(this._mouseMoveInfo.push(l),this._mouseMoveInfo.length>2&&this._mouseMoveInfo.shift(),this._moveSpin("horz"==this.options.orientation?h:c,t,o),this.options.orientation!=this.moveDir&&void 0)},_moveSpin:function(t,e,i){var s=Math.round(t/this.options.dragDistance*(this._count-1));"normal"==this.options.dir&&(s=0-s),this._track("move",{domEvent:e,distFromStart:t});var o=this._numToIndex(s+i);o!=this._index&&(this._checkLoop(o),this.goTo(o))},_checkLoop:function(t){Math.abs(this._index-t)>2&&(this._index>t?this._track("looped","forwards"):this._track("looped","backwards"))},_endDrag:function(t,e,i,s,o){"horz"==this.moveDir&&(t.preventDefault(),t.stopPropagation()),this.moveDir=null;var n=this;if(!this._ended&&(this._started=!1,this._ended=!0,this._track("endMove",{domEvent:t}),this.$document.off(this.options.events.end,this._ubind),this.$document.off(this.options.events.move,this._mbind),clearInterval(this._timer),this._setCursor(this.options.cursor.inactive),this.element.removeClass(this.options.states.active).addClass(this.options.states.inactive),this.options.momentum&&2==this._mouseMoveInfo.length)){var a=this._mouseMoveInfo,r=a[1].e.timeStamp-a[0].e.timeStamp,h="horz"==this.options.orientation?a[1].mx-a[0].mx:a[1].my-a[0].my;if(0==h||0==r)return;var c=h/r,l=c,u=this.options.friction,p="horz"==this.options.orientation?a[1].mx-i:a[1].my-s,d=0,m=0;if(Math.abs(p)<this.options.minDistance)return;var f=null,v=function(e){var i;i=f?e-f:15,f=e;for(var s=i/10;s>0;)l-=(l-l*u)*Math.min(s,1),s-=1;d+=l*i,m+=i,n._moveSpin(d+p,t,o),Math.abs(l)>.1&&window.requestAnimationFrame(v)};return void window.requestAnimationFrame(v)}},_calcSize:function(){this._super(),this.progressIndicator&&this.progressIndicator.visible&&(this.progressIndicator.css("top",(parseInt(t(this.element.find("li")[0]).css("height"))-parseInt(this.progressIndicator.css("height")))/2+"px"),this.progressIndicator.css("left",(parseInt(t(this.element.find("li")[0]).css("width"))-parseInt(this.progressIndicator.css("width")))/2+"px"))},_getIndex:function(t){var e=this.element.children();if(t>e.length){if(!this.options.loop)return;t=1}else if(t<1){if(!this.options.loop)return;t=e.length}},_direction:function(t){for(var e=0,i=0,s=t;s!=this._index;)s>this._count?s=0:s++,e++;for(s=t;s!=this._index;)s<1?s=this._count:s--,i++;return i<e},_loopIndex:function(t,e,i){for(var s=t?1:-1,o=e,n=0;n<i;n++)o+s>this._count?o=1:o+s<1?o=this._count:o+=s;return o},_loopCount:function(t,e,i){for(var s=t?1:-1,o=e,n=0;o!=i;)n++,o+s>this._count?o=1:o+s<1?o=this._count:o+=s;return n},_animate:function(t){var e=this.element,i=e.children("li").eq(this._index-1),s=e.children("li").eq(t-1);this._index!=t&&(s.addClass(this.options.states.selected+" "+this.options.states.seen),this.isIE?(s.css("z-index",1),i.css("z-index",-1)):(s.css("display","block"),i.css("display","none")),i.removeClass(this.options.states.selected),this._setIndex(t),this._setIndex(t,!0))},_track:function(t,e){this._trigger(t,null,e),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"spin",t,e)},_destroy:function(){this.element.removeClass("amp"),this.element.removeClass("amp-spin"),this.element.removeClass(this.options.states.active),this.element.removeClass(this.options.states.inactive),this.element.css("cursor",""),this.element.find(".amp-progress").remove(),this.element.find(".amp-loading").remove(),this._removeEmptyAttributeHelper(this.element);var e=this.element.children();e.removeClass("amp-frame"),e.removeClass(this.options.states.selected),e.removeClass(this.options.states.seen),e.css("display","");for(var i=0,s=e.length;i<s;i++)this._removeEmptyAttributeHelper(t(e[i]));var o=e.find("img");o.removeClass("amp amp-main-img, amp-image"),o.css("display","");for(var i=0,s=o.length;i<s;i++)this._removeEmptyAttributeHelper(t(o[i]))}})}(jQuery),"undefined"!=typeof videojs&&videojs.plugin("resolutions",function(t){var e=this;if("undefined"!=typeof vjs){vjs.reduce=function(t,e,i,s){if(t&&0!==t.length){for(var o=0,n=t.length;o<n;o++)i=e.call(t,i,t[o],o);return i}},this.resolutions_={options_:{},stopStream:function(){switch(e.techName){case"Html5":break;case"Flash":e.tech.el_.vjs_stop()}e.src("")},removeSources:function(t){var i=e.el_.getElementsByTagName("video")[0];if("Html5"===e.techName&&i)for(var s=i.getElementsByTagName("source"),o=0;o<s.length;o++)i.removeChild(s[o])},bucketByTypes:function(t){return vjs.reduce(t,function(t,e,i){return(t[e.type]=t[e.type]||[]).push(e),t},{},e)},selectSource:function(t){this.removeSources();var e=this.bucketByTypes(t),i=this.selectTypeAndTech(t);return!!i&&(this.options_.sourceResolutions=e[i.type],this.selectResolution(this.options_.sourceResolutions))},selectTypeAndTech:function(t){for(var i,s,o=0,n=e.options_.techOrder;o<n.length;o++)if(i=videojs.capitalize(n[o]),s=window.videojs[i],s.isSupported())for(var a=0,r=t;a<r.length;a++){var h=r[a];if(s.canPlaySource(h))return{type:h.type,tech:i}}},selectResolution:function(t){var i=0,s=!!window.localStorage;videojs.obj.each(t,function(t,e){e.index=parseInt(t,10),e["data-default"]&&(i=e.index)},e);var o=i;if(s){var n=parseInt(window.localStorage.getItem("videojs_preferred_res"),10);isNaN(n)||(o=n)}var a=t.length-1;return t[o>a?a:o]}},e.resolution=function(){return this.cache_.src.res},e.changeResolution=function(t){if(this.cache_.src===t.src)return this.trigger("resolutionchange"),this;var e=this.currentTime(),i=this.paused();this.pause(),this.resolutions_.stopStream(),"Html5"===this.techName?this.src(t.src):this.loadTech(this.techName,{src:t.src}),this.ready(function(){this.one("loadeddata",vjs.bind(this,function(){this.currentTime(e)})),this.trigger("resolutionchange"),i||(this.load(),this.play()),vjs.setLocalStorage("videojs_preferred_res",parseInt(t.index,10))})};var i=videojs.MenuItem.extend({init:function(t,e){e.label=e.source["data-res"],videojs.MenuItem.call(this,t,e),this.source=e.source,this.resolution=e.source["data-res"],this.player_.one("loadstart",vjs.bind(this,this.update)),this.player_.on("resolutionchange",vjs.bind(this,this.update))}});i.prototype.onClick=function(){videojs.MenuItem.prototype.onClick.call(this),this.player_.changeResolution(this.source)},i.prototype.update=function(){this.player_.cache_.src===this.source.src?this.selected(!0):this.selected(!1)};var s=videojs.MenuButton.extend({init:function(t,e){videojs.MenuButton.call(this,t,e),this.items.length<=1&&this.hide()}});s.prototype.sourceResolutions_,s.prototype.sourceResolutions=function(){return this.sourceResolutions_},s.prototype.onClick=function(t){if(t.target.className.match(/vjs-control-content/))this[this.el_.className.match(/touched/)?"removeClass":"addClass"]("touched");else{for(var e=$(".vjs-menu-button"),i=0;i<e.length;i++)videojs.removeClass(e[i],"touched");this.removeClass("touched")}},s.prototype.createItems=function(){for(var t=this.sourceResolutions_=this.player_.resolutions_.options_.sourceResolutions,e=[],s=0;s<t.length;s++)e.push(new i(this.player_,{source:this.sourceResolutions_[s]}));return e};var o=s.extend({init:function(t,e,i){s.call(this,t,e,i),this.el_.setAttribute("aria-label","Resolutions Menu"),this.el_.setAttribute("id","vjs-resolutions-button")}});o.prototype.kind_="resolutions",o.prototype.buttonText="Resolutions",o.prototype.className="vjs-resolutions-button",videojs.obj.merge(e.controlBar.options_.children,{resolutionsButton:{}});var n=e.resolutions_.selectSource(e.options_.sources);e.ready(function(){e.changeResolution(n);var t=new o(e);e.controlBar.addChild(t),delete e.controlBar.options_.children.resolutionsButton})}});