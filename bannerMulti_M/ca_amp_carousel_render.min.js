function renderContent(e){var t=amp.inlineContent(e)[0];slideData.slides.push(t)}function renderCarousel(){var e=Handlebars.template(AmpCa.templates.bannerMulti);console.log(slideData.spec),document.querySelectorAll(".js_banner_wrap")[0].innerHTML=e(slideData)}function showErrorMessage(e){console.log("Delivery API Request Failure",e),$(document.body).append('<div class="error">An error occurred retrieving your content.<br/><br/>Please ensure that it is published.<br/><br/>Details of the error have been saved to the browser console.</div>')}if(function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var s in t)if(void 0!==e.style[s])return{end:t[s]};return!1}e.fn.emulateTransitionEnd=function(t){var s=!1,n=this;e(this).one("bsTransitionEnd",function(){s=!0});var a=function(){s||e(n).trigger(e.support.transition.end)};return setTimeout(a,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>3)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4")}(jQuery),function(e){"use strict";function t(t){return this.each(function(){var n=e(this),a=n.data("bs.carousel"),i=e.extend({},s.DEFAULTS,n.data(),"object"==typeof t&&t),r="string"==typeof t?t:i.slide;a||n.data("bs.carousel",a=new s(this,i)),"number"==typeof t?a.to(t):r?a[r]():i.interval&&a.pause().cycle()})}var s=function(t,s){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=s,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};s.VERSION="3.3.7",s.TRANSITION_DURATION=600,s.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},s.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},s.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},s.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},s.prototype.getItemForDirection=function(e,t){var s=this.getItemIndex(t);if(("prev"==e&&0===s||"next"==e&&s==this.$items.length-1)&&!this.options.wrap)return t;var n="prev"==e?-1:1,a=(s+n)%this.$items.length;return this.$items.eq(a)},s.prototype.to=function(e){var t=this,s=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):s==e?this.pause().cycle():this.slide(e>s?"next":"prev",this.$items.eq(e))},s.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},s.prototype.next=function(){if(!this.sliding)return this.slide("next")},s.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},s.prototype.slide=function(t,n){var a=this.$element.find(".item.active"),i=n||this.getItemForDirection(t,a),r=this.interval,o="next"==t?"left":"right",l=this;if(i.hasClass("active"))return this.sliding=!1;var d=i[0],c=e.Event("slide.bs.carousel",{relatedTarget:d,direction:o});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,r&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var u=e(this.$indicators.children()[this.getItemIndex(i)]);u&&u.addClass("active")}var h=e.Event("slid.bs.carousel",{relatedTarget:d,direction:o});return e.support.transition&&this.$element.hasClass("slide")?(i.addClass(t),i[0].offsetWidth,a.addClass(o),i.addClass(o),a.one("bsTransitionEnd",function(){i.removeClass([t,o].join(" ")).addClass("active"),a.removeClass(["active",o].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(h)},0)}).emulateTransitionEnd(s.TRANSITION_DURATION)):(a.removeClass("active"),i.addClass("active"),this.sliding=!1,this.$element.trigger(h)),r&&this.cycle(),this}};var n=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=s,e.fn.carousel.noConflict=function(){return e.fn.carousel=n,this};var a=function(s){var n,a=e(this),i=e(a.attr("data-target")||(n=a.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(i.hasClass("carousel")){var r=e.extend({},i.data(),a.data()),o=a.attr("data-slide-to");o&&(r.interval=!1),t.call(i,r),o&&i.data("bs.carousel").to(o),s.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",a).on("click.bs.carousel.data-api","[data-slide-to]",a),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var s=e(this);t.call(s,s.data())})})}(jQuery),Handlebars.registerHelper("math",function(e,t,s,n){return e=parseFloat(e),s=parseFloat(s),{"+":e+s,"-":e-s,"*":e*s,"/":e/s,"%":e%s}[t]}),Handlebars.registerHelper("finance",function(e,t){var s=e.match(/([1-9])+/g);return"UK"===t?"&pound;"+Math.floor(100*parseFloat(s[0]/48))/100+" a month for 4 years":"&euro;"+Math.floor(100*parseFloat(s[0]/36))/100+" a month for 3 years"}),Handlebars.registerHelper("csv",function(e,t){var s=e.split(",");return"M"===t?void 0!==s[1]&&0!=s[1]?s[1]:void 0!==s[0]&&0!=s[0]?s[0]:"000000":"D"===t&&void 0!==s[0]&&0!=s[0]?s[0]:"000000"});var slideData={};slideData.slides=[],slideData.spec={},slideIDs=[];var cacheBuster=Math.random().toString(36).substr(2,12),visualID=$(".js_banner_wrap").data("visualid"),isROI=$(".js_banner_wrap").data("roi");slideGroupId=visualID?visualID:"1e4c2dda-484b-498d-b4a5-0d7e38702162";var masterDeliveryUrl='//c1.adis.ws/cms/content/query?fullBodyObject=true&query=%7B"sys.iri"%3A"http%3A%2F%2Fcontent.cms.amplience.com%2F'+slideGroupId+'"%7D&scope=tree&store=dfs&cacheBuster='+cacheBuster,masterRequest=$.ajax({url:masterDeliveryUrl,async:!1});for(masterRequest.done(function(e){var t=amp.inlineContent(e)[0];slideIDs=[t.Carousel_slide1,t.Carousel_slide2,t.Carousel_slide3,t.Carousel_slide4,t.Carousel_slide5],slideData.spec={roiPrices:isROI,testDate:t.testDate}}).fail(function(){console.log("Failed To Get Master ID Data")}),i=0;i<slideIDs.length;i++){var contentDeliveryUrl='//c1.adis.ws/cms/content/query?fullBodyObject=true&query=%7B"sys.iri"%3A"http%3A%2F%2Fcontent.cms.amplience.com%2F'+slideIDs[i]+'"%7D&scope=tree&store=dfs&cacheBuster='+cacheBuster;$.ajax({url:contentDeliveryUrl,async:!1}).done(renderContent).fail(showErrorMessage)}if(slideData&&renderCarousel(),!dfs)var dfs={};if(dfs.carouselText=function(e,t){var s=$("."+e);return s.html(t),s.length?"."+e+" updated to "+t:"Error Updating Carousel, Element Not Found! :("},!dfs)var dfs={};dfs.carCountdown={init:function(){console.log("Countdown Init!"),$(".bannerTextContainer.carCountdown").length>0&&this.addCountDown()},addCountDown:function(){$(".bannerTextContainer.carCountdown").each(function(){var e=this,t=$(e).data(),s=t.countdown,n=t.testdate,a=t.startdays,i=t.messagec,r=t.messaged,o=t.tv1,l=t.tv2,d=t.tv3,c=t.tv4,u=t.messageid.replace("slide_",""),h=dfs.getTimeRemaining(s,n);if(dfs.checkTextData(o,u,n),dfs.checkTextData(l,u,n),dfs.checkTextData(d,u,n),dfs.checkTextData(c,u,n),h.total>0&&h.days<a){console.log("Show Countdown on Slide: "+u),$("h2.message"+u+"b, h2.message"+u+"a").addClass("cdText"),dayOrDays=h.days>1?"DAYS":"DAY";setInterval(function(){var e=dfs.getTimeRemaining(s,n);if(e.hours<10&&(e.hours="0"+e.hours),e.mins<10&&(e.mins="0"+e.mins),e.seconds<10&&(e.seconds="0"+e.seconds),e.days>0)var t="FINAL "+e.days+" "+dayOrDays,a=!0;else var t="ENDS TODAY",a=!1;if(a)var o="& ";else var o="";o+=e.hours+"<span>hrs </span>"+e.minutes+"<span>mins </span>"+e.seconds+"<span>secs </span>",line3=0===e.days?i:"",line4=0===e.days?r:"",dfs.carouselText("message"+u+"a",t),dfs.carouselText("message"+u+"b",o),dfs.carouselText("message"+u+"c",line3),dfs.carouselText("message"+u+"d",line4)},1e3)}})}},dfs.checkTextData=function(e,t,s){var n=e.replace(/,\s+/g,",").split(",");if(6!==n.length)return!1;var a=new Date,i=n[0].split("/"),r=n[1].split("/"),o=new Date(i[1]+"/"+i[0]+"/"+i[2]+" 23:59:59"),l=new Date(r[1]+"/"+r[0]+"/"+r[2]+" 23:59:59");o<=a&&l>=a&&(dfs.carouselText("message"+t+"a",n[2]),dfs.carouselText("message"+t+"b",n[3]),dfs.carouselText("message"+t+"c",n[4]),dfs.carouselText("message"+t+"d",n[5]))},dfs.getTimeRemaining=function(e,t){var s=Date.parse(e)-Date.parse(new Date),n=Math.floor(s/1e3%60),a=Math.floor(s/1e3/60%60),i=Math.floor(s/36e5%24);return{total:s,days:Math.floor(s/864e5),hours:i,minutes:a,seconds:n}},dfs.updateElement=function(){$("#dfsCarousel").length&&($("#dfsCarousel").carousel({interval:6e3}),$("#dfsCarousel").carousel("pause"),clearInterval(PollElement),console.log("Carousel Ready and Initiated : "+PollElement),dfs.carCountdown.init())};var PollElement=setInterval(dfs.updateElement,500);