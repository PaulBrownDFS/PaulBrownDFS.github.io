dfs.bestSellers||(dfs.bestSellers={}),dfs.bestSellers.getbestSellersURL=function(){console.log("Building XML Request URL .. .. ..");for(i in dfs.bestSellers.variables)dfs.bestSellers.urls.push(dfs.bestSellers.variables[i].domain+"/webapp/wcs/stores/servlet/GetAmplienceProductDataCmd?storeId="+dfs.bestSellers.variables[i].storeId+"&catalogid="+dfs.bestSellers.variables[i].catalogId+"&category="+dfs.bestSellers.variables[i].category+"&templateId="+dfs.bestSellers.variables[i].templateId+"&imageType="+dfs.bestSellers.variables[i].imageType);dfs.bestSellers.getXMLdata()},dfs.bestSellers.getXMLdata=function(){$.each(dfs.bestSellers.urls,function(e,s){var t=dfs.bestSellers.urls[e];ajaxRequest=$.ajax({url:t,type:"get",async:!1,dataType:"text"}).done(function(s,t,r){console.log("Ajax Best Sellers Data Request:",t);var l=s.replace(/&amp;pound;/g,"&#163;").replace(/&amp;euro;/g,"&#8364;"),a=$.parseXML(l),d=($(a),new X2JS),o=d.xml_str2json(l);dfs.bestSellers.bestsellers_data[e]=[],dfs.bestSellers.variables.data=[];var c=0,p=0;dfs.bestSellers.bestsellers_data[e][p]=[];for(i in o.products.product)c++,c>8&&(p++,dfs.bestSellers.bestsellers_data[e][p]=[],c=1),dfs.bestSellers.bestsellers_data[e][p].push({sku:o.products.product[i].sku,name:o.products.product[i].name,description:o.products.product[i].description,link:o.products.product[i].link,price:o.products.product[i].price,wasprice:o.products.product[i].wasprice,image:o.products.product[i].images.medium,savelabel1:o.products.product[i].pricelabel1,price1:o.products.product[i].price1,savelabel2:o.products.product[i].pricelabel2,price2:o.products.product[i].price2,savinglabel:o.products.product[i].savinglabel,savingvalue:o.products.product[i].savingvalue,title:o.products.product[i].reviews.text})}).fail(function(e){console.log(e.statusText),console.log("Failed to load bestSellers XML Document")})})},Handlebars.registerHelper("listItem",function(e,s,t,r){for(var l="",a=e,d=s;a<d;a++)l+=r.fn(t[a]);return l}),Handlebars.registerHelper("truncate",function(e,s){if(e.length>s&&e.length>0){var t=e+" ";return t=e.substr(0,s),t=e.substr(0,t.lastIndexOf(" ")),t=t.length>0?t:e.substr(0,s),new Handlebars.SafeString(t+"...")}return e}),Handlebars.registerHelper("times",function(e,s){for(var t="",r=0;r<e;++r)s.data.index=r,s.data.first=0===r,s.data.last=r===e-1,t+=s.fn(this);return t}),dfs.bestSellers.getbestSellersURL();var templateScript=Handlebars.templates.bestSellers(dfs.bestSellers);bestSl_Target=dfs.bestSellers.variables[0].target,$("#"+bestSl_Target).append(templateScript);