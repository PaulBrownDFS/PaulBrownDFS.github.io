dfs.bestSellers||(dfs.bestSellers={}),dfs.bestSellers.getbestSellersURL=function(){console.log("Building XML Request URL .. .. ..");for(i in dfs.bestSellers.variables)dfs.bestSellers.urls.push(dfs.bestSellers.variables[i].domain+"/webapp/wcs/stores/servlet/GetAmplienceProductDataCmd?storeId="+dfs.bestSellers.variables[i].storeId+"&catalogid="+dfs.bestSellers.variables[i].catalogId+"&category="+dfs.bestSellers.variables[i].category+"&templateId="+dfs.bestSellers.variables[i].templateId+"&imageType="+dfs.bestSellers.variables[i].imageType);dfs.bestSellers.getXMLdata()},dfs.bestSellers.getXMLdata=function(){$.each(dfs.bestSellers.urls,function(e,s){var t=dfs.bestSellers.urls[e];ajaxRequest=$.ajax({url:t,type:"get",async:!1,dataType:"text"}).done(function(s,t,l){console.log("Ajax Best Sellers Data Request:",t);var r=s.replace(/&amp;pound;/g,"&#163;").replace(/&amp;euro;/g,"&#8364;"),a=$.parseXML(r),d=($(a),parse(a));dfs.bestSellers.bestsellers_data[e]=[],dfs.bestSellers.variables.data=[];var n=0,o=0;dfs.bestSellers.bestsellers_data[e][o]=[];for(i in d.product)n++,n>8&&(o++,console.log("paged",o,n),dfs.bestSellers.bestsellers_data[e][o]=[],n=1),dfs.bestSellers.bestsellers_data[e][o].push({sku:d.product[i].sku,name:d.product[i].name,description:d.product[i].description,link:d.product[i].link,price:d.product[i].price,wasprice:d.product[i].wasprice,image:d.product[i].images.medium,savelabel1:d.product[i].pricelabel1,price1:d.product[i].price1,savelabel2:d.product[i].pricelabel2,price2:d.product[i].price2,savinglabel:d.product[i].savinglabel,savingvalue:d.product[i].savingvalue,title:d.product[i].reviews.text})}).fail(function(e){console.log(e.statusText),console.log("Failed to load bestSellers XML Document")})})},Handlebars.registerHelper("listItem",function(e,s,t,l){for(var r="",a=e,i=s;a<i;a++)r+=l.fn(t[a]);return r}),Handlebars.registerHelper("truncate",function(e,s){if(e.length>s&&e.length>0){var t=e+" ";return t=e.substr(0,s),t=e.substr(0,t.lastIndexOf(" ")),t=t.length>0?t:e.substr(0,s),new Handlebars.SafeString(t+"...")}return e}),Handlebars.registerHelper("times",function(e,s){for(var t="",l=0;l<e;++l)s.data.index=l,s.data.first=0===l,s.data.last=l===e-1,t+=s.fn(this);return t}),dfs.bestSellers.getbestSellersURL();var templateScript=Handlebars.templates.bestSellers(dfs.bestSellers);bestSl_Target=dfs.bestSellers.variables[0].target,$("#"+bestSl_Target).append(templateScript);