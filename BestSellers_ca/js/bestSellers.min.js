dfs.bestSellers||(dfs.bestSellers={}),dfs.bestSellers.getbestSellersURL=function(){console.log("Building XML Request URL .. .. ..");for(i in dfs.bestSellers.variables)dfs.bestSellers.urls.push(dfs.bestSellers.variables[i].domain+"/webapp/wcs/stores/servlet/GetAmplienceProductDataCmd?storeId="+dfs.bestSellers.variables[i].storeId+"&catalogid="+dfs.bestSellers.variables[i].catalogId+"&category="+dfs.bestSellers.variables[i].category+"&templateId="+dfs.bestSellers.variables[i].templateId+"&imageType="+dfs.bestSellers.variables[i].imageType);dfs.bestSellers.getXMLdata()},dfs.bestSellers.getXMLdata=function(){$.each(dfs.bestSellers.urls,function(e,s){var t=dfs.bestSellers.urls[e];ajaxRequest=$.ajax({url:t,type:"get",async:!1,dataType:"text"}).done(function(s,t,r){console.log("Best Sellers Data Request:",t);var l=s.replace(/&amp;pound;/g,"&#163;").replace(/&amp;euro;/g,"&#8364;"),a=($.parseXML(l),new X2JS),d=a.xml_str2json(l);dfs.bestSellers.bestsellers_data[e]=[],dfs.bestSellers.variables.data=[];var o=0,c=0;dfs.bestSellers.bestsellers_data[e][c]=[];for(i in d.products.product)o++,o>8&&(c++,dfs.bestSellers.bestsellers_data[e][c]=[],o=1),dfs.bestSellers.bestsellers_data[e][c].push({sku:d.products.product[i].sku,name:d.products.product[i].name,description:d.products.product[i].description,link:d.products.product[i].link,price:d.products.product[i].price,wasprice:d.products.product[i].wasprice,image:d.products.product[i].images.medium,savelabel1:d.products.product[i].pricelabel1,price1:d.products.product[i].price1,savelabel2:d.products.product[i].pricelabel2,price2:d.products.product[i].price2,savinglabel:d.products.product[i].savinglabel,savingvalue:d.products.product[i].savingvalue,title:d.products.product[i].reviews.text})}).fail(function(e){console.log(e.statusText),console.log("Failed to load bestSellers XML Document")})})},Handlebars.registerHelper("listItem",function(e,s,t,r){for(var l="",a=e,d=s;a<d;a++)l+=r.fn(t[a]);return l}),Handlebars.registerHelper("truncate",function(e,s){if(e.length>s&&e.length>0){var t=e+" ";return t=e.substr(0,s),t=e.substr(0,t.lastIndexOf(" ")),t=t.length>0?t:e.substr(0,s),new Handlebars.SafeString(t+"...")}return e}),Handlebars.registerHelper("times",function(e,s){for(var t="",r=0;r<e;++r)s.data.index=r,s.data.first=0===r,s.data.last=r===e-1,t+=s.fn(this);return t}),dfs.bestSellers.getbestSellersURL();var templateScript=Handlebars.templates.bestSellers(dfs.bestSellers);bestSellersTarget=dfs.bestSellers.variables[0].target,$("#"+bestSellersTarget).append(templateScript);