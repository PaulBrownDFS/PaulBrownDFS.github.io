function renderNewView(){var t=getSkus();if(t.length>1){renderImage(getXML(t))}}function getSkus(){var t=document.querySelectorAll(".skus input"),e=[];for(i=0;i<t.length;i++)""!==t[i].value&&e.push(t[i].value);return e}function getXML(t){var e=[];return $.each(t,function(t,i){var n="https://www.dfs.co.uk/webapp/wcs/stores/servlet/GetAmplienceProductDataCmd?sku="+i;$.ajax({url:n,type:"get",async:!1,dataType:"text"}).done(function(t,i,n){var o=t.replace(/&pound;/g,"&#163;"),p=$.parseXML(o),a=$(p),f=a.find("images medium").text(),u=a.find("link").first().text(),d=a.find("text").text();product_name=a.find("name").text(),e.push({src:f.replace("http://images.dfs.co.uk/i/dfs/",""),link:u,range:d,product:product_name})}).fail(function(t){console.log(t.statusText),console.log("Failed to load XML Document")})}),e}function renderImage(t){var e="https://x1.adis.ws/v1/media/graphics/i/dfs/clearance_bundle_template"+t.length,i="?fmt=jpg&";4===t.length&&(width=$("input#width").val(),height=$("input#height").val(),top_offset="undefined"!=typeof top_offset?top_offset:430,left="undefined"!=typeof left?left:144,width1=$("input#width1").val(),height1=$("input#height1").val(),top1="undefined"!=typeof top1?top1:882,left1="undefined"!=typeof left1?left1:5,width2=$("input#width2").val(),height2=$("input#height2").val(),top2="undefined"!=typeof top2?top2:882,left2="undefined"!=typeof left2?left2:330,width3=$("input#width3").val(),height3=$("input#height3").val(),top3="undefined"!=typeof top3?top3:882,left3="undefined"!=typeof left3?left3:680,i+="main_product="+t[0].src,i+="&left_product="+t[1].src,i+="&middle_product="+t[2].src,i+="&right_product="+t[3].src,i+="&width="+width,i+="&height="+height,i+="&top="+top_offset,i+="&left="+left,i+="&width1="+width1,i+="&height1="+height1,i+="&left1="+left1,i+="&top1="+top1,i+="&width2="+width2,i+="&height2="+height2,i+="&left2="+left2,i+="&top2="+top2,i+="&width3="+width3,i+="&height3="+height3,i+="&left3="+left3,i+="&top3="+top3,$(".attributes").removeClass("active"),$(".attributes.main_image, .attributes.left_image, .attributes.middle_image, .attributes.right_image").addClass("active")),3===t.length&&(width=$("input#width").val(),height=$("input#height").val(),top_offset="undefined"!=typeof top_offset?top_offset:430,left="undefined"!=typeof left?left:144,width1=$("input#width1").val(),height1=$("input#height1").val(),top1="undefined"!=typeof top1?top1:882,left1="undefined"!=typeof left1?left1:193,width2=$("input#width2").val(),height2=$("input#height2").val(),top2="undefined"!=typeof top2?top2:882,left2="undefined"!=typeof left2?left2:506,i+="main_product="+t[0].src,i+="&left_product="+t[1].src,i+="&right_product="+t[2].src,i+="&width="+width,i+="&height="+height,i+="&top="+top_offset,i+="&left="+left,i+="&width1="+width1,i+="&height1="+height1,i+="&left1="+left1,i+="&top1="+top1,i+="&width2="+width2,i+="&height2="+height2,i+="&left2="+left2,i+="&top2="+top2,$(".attributes").removeClass("active"),$(".middle_image h4").text("Right Image"),$(".attributes.main_image, .attributes.left_image, .attributes.middle_image").addClass("active")),2===t.length&&(width=$("input#width").val(),height=$("input#height").val(),top_offset="undefined"!=typeof top_offset?top_offset:430,left="undefined"!=typeof left?left:144,width1=$("input#width1").val(),height1=$("input#height1").val(),top1="undefined"!=typeof top1?top1:882,left1="undefined"!=typeof left1?left1:355,i+="main_product="+t[0].src,i+="&bottom_product="+t[1].src,i+="&width="+width,i+="&height="+height,i+="&top="+top_offset,i+="&left="+left,i+="&width1="+width1,i+="&height1="+height1,i+="&left1="+left1,i+="&top1="+top1,$(".attributes").removeClass("active"),$(".left_image h4").text("Bottom Image"),$(".attributes.main_image, .attributes.left_image").addClass("active"));var n=e+i;$("img#bundle").attr("src",n),$("input#image_url_text").val(n)}$(document).ready(function(){$(".clearance_bundle_image_creator").on("click","#render_image_btn",function(){renderNewView()}),$("#topUp").on("click",function(){var t=$("input[id*='nudge']"),e=parseInt(t[0].value);top_offset=parseInt(top_offset-e),renderNewView()}),$("#topDown").on("click",function(){var t=$("input[id*='nudge']"),e=parseInt(t[0].value);top_offset=parseInt(top_offset+e),renderNewView()}),$("#leftUp").on("click",function(){var t=$("input[id*='nudge']"),e=parseInt(t[0].value);left=parseInt(left-e),renderNewView()}),$("#leftDown").on("click",function(){var t=$("input[id*='nudge']"),e=parseInt(t[0].value);left=parseInt(left+e),renderNewView()}),$("button#topUp1").on("click",function(){var t=$("input[id*='nudge']"),e=parseInt(t[1].value);top1=parseInt(top1-e),renderNewView()}),$("button#topDown1").on("click",function(){var t=$("input[id*='nudge']"),e=parseInt(t[1].value);top1=parseInt(top1+e),renderNewView()}),$("button#leftUp1").on("click",function(){var t=$("input[id*='nudge']"),e=parseInt(t[1].value);left1=parseInt(left1-e),renderNewView()}),$("button#leftDown1").on("click",function(){var t=$("input[id*='nudge']"),e=parseInt(t[1].value);left1=parseInt(left1+e),renderNewView()}),$("button#topUp2").on("click",function(){var t=$("input[id*='nudge']"),e=parseInt(t[2].value);top2=parseInt(top2-e),renderNewView()}),$("button#topDown2").on("click",function(){var t=$("input[id*='nudge']"),e=parseInt(t[2].value);top2=parseInt(top2+e),renderNewView()}),$("button#leftUp2").on("click",function(){var t=$("input[id*='nudge']"),e=parseInt(t[2].value);left2=parseInt(left2-e),renderNewView()}),$("button#leftDown2").on("click",function(){var t=$("input[id*='nudge']"),e=parseInt(t[2].value);left2=parseInt(left2+e),renderNewView()}),$("button#topUp3").on("click",function(){var t=$("input[id*='nudge']"),e=parseInt(t[3].value);top3=parseInt(top3-e),renderNewView()}),$("button#topDown3").on("click",function(){var t=$("input[id*='nudge']"),e=parseInt(t[3].value);top3=parseInt(top3+e),renderNewView()}),$("button#leftUp3").on("click",function(){var t=$("input[id*='nudge']"),e=parseInt(t[3].value);left3=parseInt(left3-e),renderNewView()}),$("button#leftDown3").on("click",function(){var t=$("input[id*='nudge']"),e=parseInt(t[3].value);left3=parseInt(left3+e),renderNewView()}),$("button#updateImageText").on("click",function(){var t=$("input#image_url_text").val();$("img#bundle").attr("src",t)})});